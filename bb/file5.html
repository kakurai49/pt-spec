<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ãƒãƒƒãƒ—ã‚¢ãƒ¼ãƒˆPythonã‚·ãƒ©ãƒã‚¹ - ã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ¼ãƒ‰é–‹ç™ºï¼ˆå‹•ãä»•æ§˜æ›¸ä»˜ãï¼‰</title>
  <link rel="stylesheet" href="pop3_style.css" />
  <!-- KaTeX for math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

  <style>
    /* ===== å…ƒHTMLã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆãã®ã¾ã¾ï¼‰ ===== */
    :root {
      --pop-yellow: #ffdd57;
      --pop-pink: #ff4081;
      --pop-blue: #1e90ff;
      --pop-green: #2ecc71;
      --pop-purple: #9b59b6;
      --pop-orange: #ff7f50;
      --ink: #1f2937;
      --paper: rgba(255,255,255,.92);
      --soft: rgba(0,0,0,.08);
    }

    body {
      background: linear-gradient(135deg, var(--pop-yellow) 0%, #ffcc00 100%);
      color: #222;
      line-height: 1.7;
    }

    .intro-section {
      background: linear-gradient(to right, #ffecd2 0%, #fcb69f 100%);
      border-left: 8px solid var(--pop-orange);
      padding: 20px;
      margin: 25px 0;
      border-radius: 0 15px 15px 0;
      box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
    }

    .session-card {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin: 30px 0;
      border-top: 10px solid;
      box-shadow: 0 10px 20px rgba(0,0,0,0.15);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .session-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.2);
    }

    .session-1 { border-color: var(--pop-pink); }
    .session-2 { border-color: var(--pop-blue); }
    .session-3 { border-color: var(--pop-green); }
    .session-4 { border-color: var(--pop-purple); }
    .session-5 { border-color: var(--pop-orange); }
    .session-6 { border-color: #e74c3c; }
    .session-7 { border-color: #1abc9c; }
    .session-8 { border-color: #3498db; }
    .session-9 { border-color: #9b59b6; }
    .session-10 { border-color: #f1c40f; }

    h1, h2, h3, h4 {
      margin-top: 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    h2 {
      color: var(--pop-pink);
      padding-bottom: 10px;
      border-bottom: 3px dashed var(--pop-pink);
    }

    h3 {
      color: var(--pop-blue);
      font-size: 1.6rem;
      background: linear-gradient(to right, rgba(30, 144, 255, 0.1), transparent);
      padding: 8px 15px;
      border-radius: 8px;
    }

    h4 {
      color: var(--pop-green);
      font-size: 1.3rem;
    }

    .spell-card {
      background: #f8f9fa;
      border-left: 6px solid var(--pop-purple);
      padding: 15px;
      margin: 15px 0;
      border-radius: 0 10px 10px 0;
      font-family: 'Courier New', monospace;
      font-weight: bold;
      color: #2c3e50;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
    }

    .function-list {
      background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
      padding: 15px;
      border-radius: 10px;
      border: 2px solid var(--pop-blue);
      margin: 15px 0;
    }

    .ikea-section {
      background: linear-gradient(135deg, #fff9c4 0%, #ffecb3 100%);
      padding: 15px;
      border-radius: 10px;
      border: 2px dashed #ff9800;
      margin: 15px 0;
    }

    pre {
      background-color: #2d3436 !important;
      color: #dfe6e9 !important;
      padding: 20px !important;
      border-radius: 10px !important;
      border: 3px solid var(--pop-blue) !important;
      font-size: 1rem !important;
      line-height: 1.5 !important;
      overflow-x: auto !important;
      white-space: pre-wrap !important;
      word-wrap: break-word !important;
      font-family: 'Courier New', Courier, monospace !important;
      max-width: 100% !important;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3) !important;
    }

    pre code { color: #dfe6e9 !important; }

    table {
      border-collapse: separate;
      border-spacing: 0;
      width: 100%;
      margin: 20px 0;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    th {
      background: linear-gradient(to right, var(--pop-pink), #ff79a9);
      color: white;
      font-weight: bold;
      padding: 12px;
      text-align: left;
    }

    td {
      padding: 12px;
      border-bottom: 1px solid #ddd;
    }

    tr:nth-child(even) { background-color: rgba(255, 221, 87, 0.2); }
    tr:hover { background-color: rgba(255, 64, 129, 0.1); }

    strong { color: var(--pop-pink); font-weight: bold; }

    .footer {
      background: linear-gradient(to right, var(--pop-pink), #ff79a9);
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
      bottom: 0;
      width: 100%;
      margin-top: 40px;
      box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
    }

    @media (max-width: 768px) {
      .container { width: 95%; padding: 15px; }
      .session-card { padding: 15px; }
      h2 { font-size: 1.6rem; }
      h3 { font-size: 1.3rem; }
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .session-card, .intro-section { animation: fadeInUp 0.6s ease-out; }

    .badge {
      display: inline-block;
      background: var(--pop-pink);
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      margin-right: 10px;
      margin-bottom: 10px;
    }

    .badge-blue { background: var(--pop-blue); }
    .badge-green { background: var(--pop-green); }
    .badge-purple { background: var(--pop-purple); }

    .math-container {
      background: rgba(255, 255, 255, 0.9);
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      border: 2px solid var(--pop-blue);
      overflow-x: auto;
    }

    /* ===== ã“ã“ã‹ã‚‰è¿½åŠ ï¼šã€Œå‹•ãä»•æ§˜æ›¸ã€UI ===== */
    .spec-wrap {
      background: linear-gradient(135deg, rgba(255,255,255,.96), rgba(255,255,255,.86));
      border: 3px solid rgba(31,41,55,.15);
      border-radius: 18px;
      padding: 18px;
      margin: 18px 0 28px 0;
      box-shadow: 0 12px 28px rgba(0,0,0,.14);
    }
    .spec-head {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    .spec-title {
      display: flex;
      gap: 10px;
      align-items: baseline;
      flex-wrap: wrap;
    }
    .spec-title h2 {
      margin: 0;
      border-bottom: 0;
      padding-bottom: 0;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border-radius: 999px;
      padding: 6px 10px;
      background: rgba(30,144,255,.10);
      border: 1px solid rgba(30,144,255,.25);
      color: var(--ink);
      font-weight: 700;
      font-size: 0.92rem;
    }
    .pill small { font-weight: 700; opacity: .8; }

    .spec-grid {
      display: grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      margin-top: 12px;
    }
    @media (max-width: 900px) { .spec-grid { grid-template-columns: 1fr; } }

    .card {
      background: var(--paper);
      border: 1px solid rgba(0,0,0,.10);
      border-radius: 16px;
      padding: 14px;
      box-shadow: inset 0 0 12px rgba(0,0,0,.04);
    }
    .card h4 { margin: 0 0 10px 0; }
    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 600px) { .row { grid-template-columns: 1fr; } }

    .ctrl {
      display: grid;
      gap: 6px;
    }
    .ctrl label { font-weight: 800; color: #0f172a; }
    .ctrl input[type="text"], .ctrl input[type="number"], .ctrl select, .ctrl textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.18);
      outline: none;
      background: white;
      box-shadow: 0 2px 0 rgba(0,0,0,.04);
      font-size: 0.98rem;
    }
    .ctrl input[type="range"] { width: 100%; }

    .btns {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .btn {
      appearance: none;
      border: 1px solid rgba(0,0,0,.14);
      background: linear-gradient(135deg, rgba(255,64,129,.16), rgba(255,64,129,.08));
      color: #111827;
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 10px 18px rgba(0,0,0,.10);
      transition: transform .15s ease, opacity .15s ease;
      user-select: none;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn:active { transform: translateY(0px); opacity: .9; }
    .btn.blue { background: linear-gradient(135deg, rgba(30,144,255,.18), rgba(30,144,255,.08)); }
    .btn.green { background: linear-gradient(135deg, rgba(46,204,113,.18), rgba(46,204,113,.08)); }
    .btn.orange { background: linear-gradient(135deg, rgba(255,127,80,.20), rgba(255,127,80,.10)); }
    .btn.gray { background: linear-gradient(135deg, rgba(17,24,39,.10), rgba(17,24,39,.06)); }

    .disabled {
      opacity: .45 !important;
      filter: grayscale(.55);
      pointer-events: none !important;
    }

    .kpi {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    @media (max-width: 600px) { .kpi { grid-template-columns: 1fr; } }
    .kpi .box {
      background: rgba(255,221,87,.18);
      border: 1px solid rgba(255,221,87,.45);
      border-radius: 16px;
      padding: 10px 12px;
    }
    .kpi .box b { font-size: 1.25rem; display:block; }
    .hint {
      background: rgba(155,89,182,.10);
      border: 1px dashed rgba(155,89,182,.45);
      border-radius: 14px;
      padding: 10px 12px;
      color: #111827;
      margin-top: 10px;
      font-weight: 800;
    }

    .list {
      margin: 10px 0 0 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 10px;
    }
    .item {
      background: white;
      border-radius: 16px;
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 10px 18px rgba(0,0,0,.08);
      padding: 12px;
      display: grid;
      gap: 8px;
    }
    .item-top {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .tag {
      display:inline-flex;
      align-items:center;
      gap:6px;
      background: rgba(46,204,113,.10);
      border: 1px solid rgba(46,204,113,.22);
      border-radius: 999px;
      padding: 4px 10px;
      font-weight: 900;
      font-size: .9rem;
    }
    .tag.done { background: rgba(31,41,55,.08); border-color: rgba(31,41,55,.15); }
    .meta { opacity: .75; font-weight: 800; font-size: .9rem; }
    .titleline { font-weight: 1000; font-size: 1.05rem; color: #0b1220; }
    .titleline .muted { opacity: .65; font-weight: 800; }
    .actions {
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .mini {
      padding: 8px 10px;
      border-radius: 12px;
      font-weight: 1000;
      border: 1px solid rgba(0,0,0,.14);
      cursor: pointer;
      background: rgba(255,255,255,.95);
      box-shadow: 0 8px 16px rgba(0,0,0,.08);
    }
    .mini:hover { transform: translateY(-1px); }
    .mini:active { transform: translateY(0px); opacity: .9; }

    .console {
      background: #0b1220;
      color: #e5e7eb;
      border-radius: 16px;
      padding: 12px;
      border: 2px solid rgba(30,144,255,.35);
      box-shadow: inset 0 0 18px rgba(0,0,0,.45);
    }
    .console .log {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .95rem;
      white-space: pre-wrap;
      word-break: break-word;
      min-height: 84px;
      max-height: 220px;
      overflow:auto;
      margin: 0 0 10px 0;
    }
    .console input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.20);
      outline: none;
      background: rgba(255,255,255,.06);
      color: #e5e7eb;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-weight: 900;
    }
    .smallnote { font-size: .92rem; font-weight: 850; opacity: .85; }
  </style>
</head>

<body>
  <header>
    ğŸ¨ Pythonã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ¼ãƒ‰é–‹ç™ºã‚·ãƒ©ãƒã‚¹ ğŸš€
  </header>

  <div class="container">
    <!-- =========================================================
         è¿½åŠ ï¼šå‹•ãä»•æ§˜æ›¸ï¼ˆJavaScriptç‰ˆã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ¼ãƒ‰ï¼‰
         ========================================================= -->
    <section class="spec-wrap" id="spec">
      <div class="spec-head">
        <div class="spec-title">
          <h2>ğŸ§ª å‹•ãä»•æ§˜æ›¸ï¼šJavaScriptç‰ˆã€Œã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ¼ãƒ‰ã€</h2>
          <span class="pill">å›æ•°ã§æ©Ÿèƒ½ãŒè§£æ”¾ã•ã‚Œã‚‹ <small>ï¼ˆç¬¬1å›â†’ç¬¬10å›ï¼‰</small></span>
        </div>
        <div class="pill" id="levelPill">ç¾åœ¨ï¼šç¬¬<span id="levelNum">1</span>å›ã¾ã§</div>
      </div>

      <div class="card">
        <div class="row">
          <div class="ctrl">
            <label for="levelRange">å›æ•°ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆã“ã®å›ã¾ã§ã®ä»•æ§˜ãŒä½¿ãˆã‚‹ï¼‰</label>
            <input id="levelRange" type="range" min="1" max="10" value="1" />
            <div class="smallnote">æœªè§£æ”¾ã®æ©Ÿèƒ½ã¯ã‚°ãƒ¬ãƒ¼ï¼†æ“ä½œä¸å¯ã«ãªã‚Šã¾ã™ï¼ˆã€Œç©ã¿ä¸Šã’ã€ã‚’ä½“é¨“ã™ã‚‹ãŸã‚ï¼‰ã€‚</div>
          </div>
          <div class="ctrl">
            <label>ä»•æ§˜ã®æŸ±ï¼ˆã‚·ãƒ©ãƒã‚¹æº–æ‹ ï¼‰</label>
            <div class="hint" id="featureHint">ç¬¬1å›ï¼šå…¥åŠ›â†’æ•´å½¢â†’è¡¨ç¤ºï¼ˆã¾ãšå‹•ã„ãŸï¼ï¼‰</div>
          </div>
        </div>
      </div>

      <div class="spec-grid">
        <div class="card">
          <h4>ã‚¯ã‚¨ã‚¹ãƒˆæ“ä½œï¼ˆGUIï¼‰</h4>

          <div class="row">
            <div class="ctrl">
              <label for="titleInput">ã‚¯ã‚¨ã‚¹ãƒˆå</label>
              <input id="titleInput" type="text" placeholder="ä¾‹ï¼šç­‹ãƒˆãƒ¬ / èª­æ›¸ / æƒé™¤" maxlength="80" />
              <div class="smallnote">ç¬¬1å›ã®ä»•æ§˜ï¼šå‰å¾Œã®ç©ºç™½ã‚’å‰Šã‚Šã€å…ˆé ­1æ–‡å­—ã ã‘å¤§æ–‡å­—åŒ–ã€‚</div>
            </div>
            <div class="ctrl">
              <label for="xpInput">XPï¼ˆé”æˆç‚¹ï¼‰</label>
              <input id="xpInput" type="number" min="1" max="999" value="1" />
              <div class="smallnote">XPã¯ç¬¬2å›ã‹ã‚‰æœ‰åŠ¹ï¼ˆToDoã‚’ã‚²ãƒ¼ãƒ åŒ–ï¼‰ã€‚</div>
            </div>
          </div>

          <div class="btns">
            <button class="btn green" id="addBtn">å—æ³¨ï¼ï¼ˆè¿½åŠ ï¼‰</button>
            <button class="btn blue" id="sampleBtn">ã‚µãƒ³ãƒ—ãƒ«æŠ•å…¥</button>
            <button class="btn orange" id="saveBtn">ä¿å­˜</button>
            <button class="btn gray" id="resetBtn">ãƒ‡ãƒ¼ã‚¿åˆæœŸåŒ–</button>
          </div>

          <div class="row" style="margin-top:10px;">
            <div class="ctrl">
              <label for="searchInput">æ¤œç´¢</label>
              <input id="searchInput" type="text" placeholder="éƒ¨åˆ†ä¸€è‡´ï¼ˆç¬¬6å›ã§è§£æ”¾ï¼‰" />
            </div>
            <div class="ctrl">
              <label for="sortSelect">ä¸¦ã³æ›¿ãˆ</label>
              <select id="sortSelect">
                <option value="idAsc">IDæ˜‡é †</option>
                <option value="idDesc">IDé™é †</option>
                <option value="xpDesc">XPé«˜ã„é †</option>
                <option value="createdDesc">æ–°ã—ã„é †</option>
              </select>
            </div>
          </div>

          <div class="row" style="margin-top:10px;">
            <div class="ctrl">
              <label for="filterSelect">çµã‚Šè¾¼ã¿</label>
              <select id="filterSelect">
                <option value="all">ã™ã¹ã¦</option>
                <option value="undone">æœªå®Œäº†ã®ã¿</option>
                <option value="done">å®Œäº†ã®ã¿</option>
              </select>
            </div>
            <div class="ctrl">
              <label for="ikeaMark">IKEAæ”¹é€ ï¼šå®Œäº†ãƒãƒ¼ã‚¯</label>
              <input id="ikeaMark" type="text" maxlength="6" placeholder="ä¾‹ï¼šâœ… / â˜… / DONE" />
              <div class="smallnote">ç¬¬10å›ã§ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆã‚ãªãŸä»•æ§˜ï¼‰ã€‚</div>
            </div>
          </div>

          <ul class="list" id="list"></ul>
        </div>

        <div class="card">
          <h4>çŠ¶æ…‹ãƒ»ä»•æ§˜ãƒ†ã‚¹ãƒˆãƒ»CLIé¢¨ï¼ˆé«˜å›ã§è§£æ”¾ï¼‰</h4>

          <div class="kpi" id="kpi">
            <div class="box">
              <div class="meta">ç·ã‚¯ã‚¨ã‚¹ãƒˆ</div>
              <b id="kpiTotal">0</b>
            </div>
            <div class="box">
              <div class="meta">å®Œäº†</div>
              <b id="kpiDone">0</b>
            </div>
            <div class="box">
              <div class="meta">ç²å¾—XP</div>
              <b id="kpiXp">0</b>
            </div>
          </div>

          <div class="hint" id="statsHint" style="margin-top:12px;">
            ç¬¬10å›ï¼šé›†è¨ˆï¼ˆå®Œäº†ç‡ãƒ»ç²å¾—XPï¼‰ãŒã“ã“ã«å‡ºã¾ã™
          </div>

          <div class="card" style="margin-top:12px;">
            <h4 style="margin-bottom:6px;">è–„ã„TDDï¼ˆassertï¼‰</h4>
            <div class="smallnote">ç¬¬8å›ä»¥é™ï¼šãƒ†ã‚¹ãƒˆã¯ä¸»å½¹ã«ã—ãªã„ï¼ˆå‹•ä½œç¢ºèªã®é“å…·ã¨ã—ã¦è–„ãï¼‰ã€‚</div>
            <div class="btns">
              <button class="btn blue" id="runTestsBtn">assertãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            </div>
            <div class="smallnote" id="testResult">ï¼ˆæœªå®Ÿè¡Œï¼‰</div>
          </div>

          <div class="card console" style="margin-top:12px;">
            <div class="log" id="consoleLog"># ç¬¬9å›ä»¥é™ï¼šCLIé¢¨ã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã¾ã™ï¼ˆä¾‹ï¼‰&#10;quest add "ç­‹ãƒˆãƒ¬" --xp 3&#10;quest list --undone&#10;quest done 1&#10;quest delete 2&#10;quest search ç­‹&#10;quest stats</div>
            <input id="consoleInput" type="text" placeholder="quest ..." />
            <div class="smallnote" style="opacity:.85;margin-top:8px;">
              â€» ç¬¬9å›ã§è§£æ”¾ã€‚ç¬¬7å›ã®ä¿å­˜ï¼ˆlocalStorageï¼‰ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€Œé“å…·ã€æ„ŸãŒä¸ŠãŒã‚‹ã€‚
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ====== ã“ã“ã‹ã‚‰ä¸‹ã¯ã€æ·»ä»˜HTMLã®å†…å®¹ï¼ˆå…ƒã®ã¾ã¾ï¼‰ ====== -->
    <div class="intro-section">
      <h2>ã‚ãªãŸã®ã€Œé¡˜ã„ã€ã‚’å®Ÿç¾ã™ã‚‹ã‚·ãƒ©ãƒã‚¹</h2>
      <p>ã“ã®ã‚·ãƒ©ãƒã‚¹ã¯ã€ã‚ãªãŸã®ã€Œé¡˜ã„ã€</p>
      <ul>
        <li><strong>ã‚³ãƒ¼ãƒ‰ãŒèº«ã«ã¤ã</strong></li>
        <li><strong>æ¯å›"ã§ããŸ"ã§çµ‚ã‚ã‚‹</strong></li>
        <li><strong>IKEAåŠ¹æœã§ãƒ¢ãƒãƒ™ç¶­æŒ</strong></li>
        <li><strong>ç¬¬10å›ã§"æœ€åˆã®é–¢æ•°ãŸã¡"ãŒæ ¸ã®ã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ãæ„Ÿå‹•</strong></li>
      </ul>
      <p>ã«åˆã‚ã›ã¦è¨­è¨ˆã•ã‚ŒãŸ<strong>å…·ä½“ã‚·ãƒ©ãƒã‚¹ï¼ˆå…¨10å›ï¼‰</strong>ã§ã™ã€‚</p>
      <p>TDDã¯ä¸»å½¹ã«ã›ãšã€<strong>"å‹•ä½œç¢ºèªã®é“å…·"</strong>ã¨ã—ã¦è–„ãä½¿ã„ã¾ã™ï¼ˆåŸºæœ¬ã¯ãƒ‡ãƒ¢ï¼‹<code>assert</code>ã€ä½™è£•ãŒã‚ã‚Œã°<code>pytest</code>ï¼‰ã€‚</p>
    </div>

    <div class="intro-section">
      <h2>ç†è«–ã®è¨€ã„æ–¹ã«åˆã‚ã›ãŸè¨­è¨ˆï¼ˆè¶…çŸ­ãï¼‰</h2>
      <div class="math-container">
        <div class="katex">
          \text{World (W)} = \{\text{Pythonã‚’è¦šãˆãªãŒã‚‰"å‹•ãå°ã•ãªã‚·ã‚¹ãƒ†ãƒ "ã‚’è‚²ã¦ã‚‹å…¨å¯èƒ½æ€§}\}
        </div>
      </div>
      <div class="math-container">
        <div class="katex">
          \text{è©•ä¾¡åŸºæº– (E)} = \text{æ¯å›ã®é”æˆæ„Ÿï¼ˆIKEAï¼‰} + \text{ã¡ã‚‡ã†ã©è‰¯ã„é›£æ˜“åº¦ï¼ˆGoldilocksï¼‰} + \text{çŸ¥è­˜ã®ç©ã¿ä¸Šã’}
        </div>
      </div>
      <div class="math-container">
        <div class="katex">
          \text{è¦³ç‚¹ (S)} = \text{æ¯å›ã€Œä½•ã§åŒºåˆ¥ã—ã¦ä¼¸ã°ã™ã‹ã€}
        </div>
      </div>
      <p>ã“ã®ã‚·ãƒ©ãƒã‚¹ã§ã¯ <strong>èƒŒéª¨Sï¼"ãƒ¦ãƒ¼ã‚¶ä¾¡å€¤ï¼ˆæ©Ÿèƒ½ï¼‰"</strong>ã€ã‚µãƒ–ã§ <strong>Sï¼"PythonçŸ¥è­˜"</strong>ã€æœ€å¾Œã« <strong>Sï¼"è‡ªåˆ†æ”¹é€ ï¼ˆIKEAï¼‰"</strong> ã‚’åˆæˆã—ã¦é€²ã‚ã¾ã™ã€‚</p>
    </div>

    <div class="intro-section">
      <h2>ä½œå“ï¼ˆæœ€å¾Œã«å‹•ãã‚·ã‚¹ãƒ†ãƒ ï¼‰</h2>
      <h3>ã€Œã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ¼ãƒ‰ã€ï¼ˆToDoã‚’ã‚²ãƒ¼ãƒ åŒ–ã—ãŸCLIã‚¢ãƒ—ãƒªï¼‰</h3>
      <ul>
        <li>ã‚¯ã‚¨ã‚¹ãƒˆè¿½åŠ  / ä¸€è¦§ / å®Œäº† / å‰Šé™¤ / æ¤œç´¢ / é›†è¨ˆï¼ˆç²å¾—XPï¼‰</li>
        <li>JSONã«ä¿å­˜ãƒ»èª­è¾¼</li>
        <li>æœ€çµ‚çš„ã« <code>quest add "ç­‹ãƒˆãƒ¬" --xp 3</code> ã¿ãŸã„ã«ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚å‹•ã</li>
      </ul>
      <div class="ikea-section">
        <p>ğŸ¯ <strong>ãƒã‚¤ãƒ³ãƒˆ:</strong> "ToDo"ã ã¨åœ°å‘³ã«ãªã‚ŠãŒã¡ãªã®ã§ã€<strong>XPï¼ˆé”æˆç‚¹ï¼‰</strong>ã‚’å…¥ã‚Œã¦ã€Œè‚²ã¤æ„Ÿã˜ã€ã‚’å¼·ãã—ã¦ã„ã¾ã™ã€‚</p>
      </div>
    </div>

    <div class="intro-section">
      <h2>æ¯å›ã®æˆæ¥­ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå›ºå®šï¼‰</h2>
      <ol>
        <li>ä»Šæ—¥ã®ã‚´ãƒ¼ãƒ«ï¼ˆ1æ–‡ï¼‰</li>
        <li>ä»Šæ—¥ã®"è¦šãˆã‚‹å‘ªæ–‡"ï¼ˆ3ã¤ã ã‘ï¼‰</li>
        <li>ä»Šæ—¥å¢—ã‚„ã™é–¢æ•°ï¼ˆ2ã€œ4å€‹ï¼‰</li>
        <li>ãƒ‡ãƒ¢ã§ã€Œã§ããŸï¼ã€ï¼ˆå¿…é ˆï¼‰</li>
        <li><strong>1åˆ†IKEAæ”¹é€ </strong>ï¼ˆå¿…é ˆï¼šè‡ªåˆ†ä»•æ§˜ã«ã—ã¦æ‰€æœ‰æ„Ÿï¼‰</li>
      </ol>
      <div class="spell-card">
        â€»Goldilocksç¶­æŒãƒ«ãƒ¼ãƒ«ï¼š<strong>æ–°ã—ã„æ¦‚å¿µã¯1å€‹ã€ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã¯æœ€å¤§2å€‹ã¾ã§</strong>
      </div>
    </div>

    <h2>ã‚·ãƒ©ãƒã‚¹ï¼ˆå…¨10å›ãƒ»å…·ä½“ï¼‰</h2>

    <!-- ç¬¬1å› -->
    <div class="session-card session-1">
      <h3><span class="badge">ç¬¬1å›</span> ã¾ãšå‹•ã„ãŸï¼å…¥åŠ›â†’æ•´å½¢â†’è¡¨ç¤º</h3>
      <h4>èƒŒéª¨Sï¼ˆãƒ¦ãƒ¼ã‚¶ä¾¡å€¤ï¼‰</h4>
      <p>ã‚¯ã‚¨ã‚¹ãƒˆã‚’"å…¥åŠ›ã—ã¦è¡¨ç¤º"ã§ãã‚‹</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p>å®Ÿè¡Œã€å¤‰æ•°ã€å‹ï¼ˆstr/intï¼‰ã€å‘½åã€<code>input/print</code></p>
      <h4>ä»Šæ—¥ã®å‘ªæ–‡ï¼ˆæš—è¨˜ï¼‰</h4>
      <div class="spell-card">
        <code>name = input("...")</code><br>
        <code>text.strip()</code><br>
        <code>print(f"...{name}...")</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>prompt_title() -> str</code><br>
        <code>normalize_title(title: str) -> str</code>
      </div>
      <h4>ã§ããŸãƒ‡ãƒ¢</h4>
      <p>å…¥åŠ›ã—ãŸã‚¯ã‚¨ã‚¹ãƒˆåãŒæ•´å½¢ã•ã‚Œã¦è¡¨ç¤ºã•ã‚Œã‚‹</p>
      <h4>IKEAæ”¹é€ ï¼ˆé¸æŠå¼ï¼‰</h4>
      <div class="ikea-section">
        è¡¨ç¤ºæ–‡è¨€ã‚’è‡ªåˆ†ã®ä¸–ç•Œè¦³ã«ï¼ˆä¾‹ï¼šã€Œã‚¯ã‚¨ã‚¹ãƒˆå—æ³¨ï¼ã€ï¼‰
      </div>
    </div>

    <!-- ç¬¬2å› -->
    <div class="session-card session-2">
      <h3><span class="badge badge-blue">ç¬¬2å›</span> ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤ï¼ˆlist/dictï¼‰â†’è¿½åŠ ï¼†ä¸€è¦§</h3>
      <h4>èƒŒéª¨S</h4>
      <p>è¿½åŠ ã—ãŸã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¸€è¦§ã§ãã‚‹</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>list</code>/<code>dict</code>ã€<code>append</code>ã€è¦ç´ ã‚¢ã‚¯ã‚»ã‚¹</p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>tasks = []</code><br>
        <code>tasks.append(task)</code><br>
        <code>for t in tasks: ...</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>make_task(title: str, xp: int = 1) -> dict</code><br>
        <code>add_task(tasks: list, task: dict) -> None</code><br>
        <code>format_task(task: dict) -> str</code>
      </div>
      <h4>ã§ããŸ</h4>
      <p>2ä»¶è¿½åŠ ã—ã¦ä¸€è¦§è¡¨ç¤º</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        è¡¨ç¤ºãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆçµµæ–‡å­—/ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ/é †ç•ªï¼‰ã‚’è‡ªåˆ†å¥½ã¿ã«
      </div>
    </div>

    <!-- ç¬¬3å› -->
    <div class="session-card session-3">
      <h3><span class="badge badge-green">ç¬¬3å›</span> if/forã§"å®Œäº†"ãŒã§ãã‚‹ï¼ˆã‚¢ãƒ—ãƒªã£ã½ã•çˆ†ä¸ŠãŒã‚Šï¼‰</h3>
      <h4>èƒŒéª¨S</h4>
      <p>å®Œäº†ï¼ˆDONEï¼‰ã«ã§ãã‚‹ï¼æœªå®Œäº†ä¸€è¦§ã«çµã‚Œã‚‹</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>if</code>ã€æ¯”è¼ƒã€boolã€<code>continue</code></p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>if cond: ... else: ...</code><br>
        <code>task["done"] = True</code><br>
        <code>if task["done"]: continue</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>next_id(tasks) -> int</code>ï¼ˆIDä»˜ä¸ãŒã“ã“ã§å…¥ã‚‹ï¼‰<br>
        <code>find_task(tasks, task_id) -> dict | None</code><br>
        <code>complete_task(tasks, task_id) -> bool</code>
      </div>
      <h4>ã§ããŸ</h4>
      <p>IDæŒ‡å®šã§å®Œäº†â†’æœªå®Œäº†ã ã‘è¡¨ç¤º</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        å®Œäº†ãƒãƒ¼ã‚¯ã‚’è‡ªåˆ†ä»•æ§˜ï¼ˆâœ…/â˜…/DONE ãªã©ï¼‰
      </div>
    </div>

    <!-- ç¬¬4å› -->
    <div class="session-card session-4">
      <h3><span class="badge badge-purple">ç¬¬4å›</span> ãƒ¡ãƒ‹ãƒ¥ãƒ¼åŒ–ï¼ˆwhileï¼‰ã§"æ“ä½œã—ã¦ã‚‹æ„Ÿ"ã‚’ä½œã‚‹</h3>
      <h4>èƒŒéª¨S</h4>
      <p>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã€Œè¿½åŠ /ä¸€è¦§/å®Œäº†ã€ãŒé¸ã¹ã‚‹</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>while</code>ã€é–¢æ•°åˆ†å‰²ã®æ„Ÿè¦šï¼ˆUIã¨å‡¦ç†ã‚’åˆ†ã‘ã‚‹ï¼‰</p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>while True:</code><br>
        <code>choice = input("> ")</code><br>
        <code>break</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>show_menu() -> str</code><br>
        <code>handle_choice(choice, tasks) -> bool</code>ï¼ˆç¶šè¡Œ/çµ‚äº†ï¼‰
      </div>
      <h4>ã§ããŸ</h4>
      <p>ã‚¢ãƒ—ãƒªã¨ã—ã¦é€£ç¶šæ“ä½œã§ãã‚‹</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        ãƒ¡ãƒ‹ãƒ¥ãƒ¼é …ç›®ã®åå‰ã‚’ä¸–ç•Œè¦³ã«åˆã‚ã›ã‚‹ï¼ˆä¾‹ï¼šå—æ³¨/æ²ç¤ºæ¿/å ±å‘Šï¼‰
      </div>
    </div>

    <!-- ç¬¬5å› -->
    <div class="session-card session-5">
      <h3><span class="badge">ç¬¬5å›</span> å‰Šé™¤ï¼‹å…¥åŠ›ã®å®‰å…¨åŒ–ï¼ˆè½ã¡ãªã„å¿«é©ã•ï¼‰</h3>
      <h4>èƒŒéª¨S</h4>
      <p>å‰Šé™¤ã§ãã‚‹ï¼å¤‰ãªå…¥åŠ›ã§ã‚‚è½ã¡ã«ãã„</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>try/except</code>ã€ã‚¨ãƒ©ãƒ¼æ–‡ã®ä½œã‚Šæ–¹</p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>try: n = int(s) except ValueError: ...</code><br>
        <code>return None</code>ï¼ˆå¤±æ•—æ™‚ã®åˆå›³ï¼‰<br>
        <code>if x is None: ...</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>safe_int(text: str) -> int | None</code><br>
        <code>delete_task(tasks, task_id) -> bool</code>
      </div>
      <h4>ã§ããŸ</h4>
      <p>å­˜åœ¨ã—ãªã„IDã§ã‚‚"å„ªã—ã"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        ã‚¨ãƒ©ãƒ¼æ–‡ã‚’"è‡ªåˆ†ã®è¨€è‘‰"ã«ï¼ˆUXãŒä½œå“æ„Ÿã‚’ä½œã‚‹ï¼‰
      </div>
    </div>

    <!-- ç¬¬6å› -->
    <div class="session-card session-6">
      <h3><span class="badge">ç¬¬6å›</span> æ¤œç´¢ãƒ»ä¸¦ã³æ›¿ãˆï¼ˆä¾¿åˆ©ã•ã§ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒä¸ŠãŒã‚‹å›ï¼‰</h3>
      <h4>èƒŒéª¨S</h4>
      <p>æ¤œç´¢ã§ãã‚‹ï¼ä¸¦ã³æ›¿ãˆã§ãã‚‹</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p>æ–‡å­—åˆ—æ“ä½œã€<code>in</code>ã€<code>sorted</code>ã€keyé–¢æ•°</p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>q.lower()</code><br>
        <code>if q in title:</code><br>
        <code>sorted(tasks, key=lambda t: t["id"])</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>search_tasks(tasks, query) -> list</code><br>
        <code>sort_tasks(tasks, mode="id") -> list</code>
      </div>
      <h4>ã§ããŸ</h4>
      <p>æ¤œç´¢çµæœã ã‘ä¸€è¦§ã§ãã‚‹</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        æ¤œç´¢ãƒ«ãƒ¼ãƒ«ã‚’é¸ã¶ï¼ˆéƒ¨åˆ†ä¸€è‡´/å‰æ–¹ä¸€è‡´/å¤§æ–‡å­—å°æ–‡å­—ç„¡è¦–ãªã©ï¼‰
      </div>
    </div>

    <!-- ç¬¬7å› -->
    <div class="session-card session-7">
      <h3><span class="badge">ç¬¬7å›</span> ä¿å­˜ã§ããŸï¼ï¼ˆæœ€å¤§ã®æ„Ÿå‹•ãƒã‚¤ãƒ³ãƒˆï¼‰</h3>
      <h4>èƒŒéª¨S</h4>
      <p>çµ‚äº†ã—ã¦ã‚‚æ®‹ã‚‹ï¼ˆJSONä¿å­˜/èª­è¾¼ï¼‰</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>with open</code>ã€<code>json.load/dump</code>ã€<code>pathlib</code></p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>from pathlib import Path</code><br>
        <code>with path.open("r", encoding="utf-8") as f:</code><br>
        <code>json.dump(data, f, ensure_ascii=False, indent=2)</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>load_tasks(path) -> list</code><br>
        <code>save_tasks(path, tasks) -> None</code>
      </div>
      <h4>ã§ããŸ</h4>
      <p>å†èµ·å‹•ã—ã¦ã‚‚ã‚¯ã‚¨ã‚¹ãƒˆãŒå¾©å…ƒã•ã‚Œã‚‹</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        ä¿å­˜ãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ä¿å­˜å ´æ‰€ã‚’"è‡ªåˆ†ã®ä½œå“å"ã«ã™ã‚‹
      </div>
    </div>

    <!-- ç¬¬8å› -->
    <div class="session-card session-8">
      <h3><span class="badge">ç¬¬8å›</span> æ§‹é€ ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²ï¼‰ã§"å¢—ç¯‰ã§ãã‚‹ä½“"ã«ã™ã‚‹</h3>
      <h4>èƒŒéª¨S</h4>
      <p>æ•´ç†ã—ã¦ã‚‚å£Šã‚Œãªã„ï¼ˆè¦‹é€šã—ãŒè‰¯ããªã‚‹ï¼‰</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>import</code>ã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ†å‰²ã€<code>main()</code>å…¥å£</p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>def main(): ...</code><br>
        <code>if __name__ == "__main__": main()</code><br>
        <code>from core import add_task</code>
      </div>
      <h4>æˆæœï¼ˆæ§‹é€ ï¼‰</h4>
      <div class="function-list">
        <code>core.py</code>ï¼ˆãƒ­ã‚¸ãƒƒã‚¯ï¼‰<br>
        <code>ui.py</code>ï¼ˆè¡¨ç¤º/å…¥åŠ›ï¼‰<br>
        <code>storage.py</code>ï¼ˆä¿å­˜/èª­è¾¼ï¼‰<br>
        <code>main.py</code>ï¼ˆçµç·šï¼‰
      </div>
      <h4>ã§ããŸ</h4>
      <p>ã‚³ãƒ¼ãƒ‰ãŒ"éƒ¨å“ã®é›†åˆ"ã¨ã—ã¦è¦‹ãˆã‚‹</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        ãƒ•ã‚©ãƒ«ãƒ€å/ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã‚’ä½œå“åã«ï¼ˆæ‰€æœ‰æ„ŸãŒå¼·ã„ï¼‰
      </div>
    </div>

    <!-- ç¬¬9å› -->
    <div class="session-card session-9">
      <h3><span class="badge">ç¬¬9å›</span> ã‚³ãƒãƒ³ãƒ‰ã§å‹•ã„ãŸï¼ï¼ˆé“å…·ã«ãªã£ãŸæ„Ÿå‹•ï¼‰</h3>
      <h4>èƒŒéª¨S</h4>
      <p>CLIã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ï¼ˆadd/list/done/searchï¼‰</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p><code>argparse</code>ï¼ˆor æœ€å°ãªã‚‰ <code>sys.argv</code>ï¼‰</p>
      <h4>å‘ªæ–‡</h4>
      <div class="spell-card">
        <code>import argparse</code><br>
        <code>parser.add_subparsers(dest="cmd")</code><br>
        <code>args = parser.parse_args()</code>
      </div>
      <h4>å¢—ãˆã‚‹é–¢æ•°</h4>
      <div class="function-list">
        <code>parse_args() -> Namespace</code><br>
        <code>dispatch(args, tasks) -> list</code>ï¼ˆå¿…è¦ãªã‚‰æ›´æ–°è¿”ã™ï¼‰
      </div>
      <h4>ã§ããŸ</h4>
      <p>ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã§æ“ä½œã§ãã‚‹</p>
      <h4>IKEAæ”¹é€ </h4>
      <div class="ikea-section">
        è‡ªåˆ†ã‚³ãƒãƒ³ãƒ‰ã‚’1å€‹è¿½åŠ ï¼ˆä¾‹ï¼š<code>stats</code> ã‚„ <code>today</code>ï¼‰
      </div>
    </div>

    <!-- ç¬¬10å› -->
    <div class="session-card session-10">
      <h3><span class="badge">ç¬¬10å›</span> çµ±åˆã—ã¦"ã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ã„ãŸ"ï¼ˆæœ€åˆã®é–¢æ•°ãŒæ ¸ã§ç¾å½¹ï¼‰</h3>
      <h4>èƒŒéª¨S</h4>
      <p>æ—¢å­˜é–¢æ•°ã®å†åˆ©ç”¨ã§"è‚²ã¦åˆ‡ã‚‹"</p>
      <h4>PythonçŸ¥è­˜S</h4>
      <p>å¾©ç¿’ï¼‹çµç·šï¼ˆä¾å­˜ã®å‘ãã€æµã‚Œã®æ•´ç†ï¼‰</p>
      <h4>ä»•ä¸Šã’å†…å®¹ï¼ˆä¾‹ï¼‰</h4>
      <div class="function-list">
        <code>stats</code>ï¼šç²å¾—XPã€å®Œäº†ç‡ã€é€£ç¶šé”æˆï¼ˆç°¡æ˜“ã§ã‚‚OKï¼‰<br>
        ãƒ˜ãƒ«ãƒ—/README/ä½¿ç”¨ä¾‹ã‚’æ•´å‚™ï¼ˆ"äººã«æ¸¡ã›ã‚‹"ãŒæ„Ÿå‹•ã«ãªã‚‹ï¼‰
      </div>
      <h4>ã§ããŸï¼ˆæœ€çµ‚ãƒ‡ãƒ¢ï¼‰</h4>
      <ol>
        <li>è¿½åŠ  â†’ ä¿å­˜</li>
        <li>å†èµ·å‹• â†’ èª­è¾¼</li>
        <li>å®Œäº† â†’ é›†è¨ˆï¼ˆXPå¢—ãˆã‚‹ï¼‰</li>
        <li>ã‚³ãƒãƒ³ãƒ‰ã§ä¸€é€£ãŒå‹•ã</li>
      </ol>
      <h4>IKEAæ”¹é€ ï¼ˆå’æ¥­åˆ¶ä½œï¼‰</h4>
      <div class="ikea-section">
        æœ€å¾Œã«"è‡ªåˆ†æ©Ÿèƒ½"ã‚’1å€‹ï¼ˆã‚¿ã‚°/å„ªå…ˆåº¦/ç· åˆ‡ãªã©ï¼‰
      </div>
    </div>

    <div class="intro-section">
      <h2>ã“ã®ã‚·ãƒ©ãƒã‚¹ãŒã€Œãƒ¯ã‚¯ãƒ¯ã‚¯Ã—Goldilocksã€ã‚’ä¿ã¤ç†ç”±ï¼ˆè¦ç‚¹ã ã‘ï¼‰</h2>
      <div class="math-container">
        <div class="katex">
          \text{é”æˆæ„Ÿ} = \text{æ¯å›ã®æ©Ÿèƒ½å¢—åŠ } + \text{IKEAæ”¹é€ } + \text{Goldilocksé›£æ˜“åº¦}
        </div>
      </div>
      <ul>
        <li><strong>æ¯å›ã®é”æˆãŒ"è¦‹ãˆã‚‹"èƒŒéª¨S</strong>ï¼ˆæ©Ÿèƒ½ãŒå¢—ãˆã¦ä½œå“ãŒè‚²ã¤ï¼‰</li>
        <li>æ–°çŸ¥è­˜ã¯<strong>1å€‹</strong>ã«çµã‚‹ï¼ˆé›£ã—ã™ããªã„ï¼‰</li>
        <li>æ¯å›"è‡ªåˆ†æ”¹é€ "ã§<strong>æ‰€æœ‰æ„ŸãŒç©ã¿ä¸ŠãŒã‚‹</strong>ï¼ˆIKEAåŠ¹æœï¼‰</li>
        <li>ç¬¬7å›ï¼ˆä¿å­˜ï¼‰ã¨ç¬¬9å›ï¼ˆCLIï¼‰ã«<strong>å¤§ãã„æ„Ÿå‹•ã®å±±</strong>ã‚’ç½®ã„ã¦ã€ä¸­ã ã‚‹ã¿ã‚’é˜²ã</li>
        <li>ç¬¬10å›ã§ã€Œç¬¬1å›ã® <code>normalize_title</code> ãŒã¾ã ç¾å½¹ã€ï¼ç©ã¿ä¸Šã’ã®è¨¼æ˜</li>
      </ul>

      <div class="ikea-section">
        <h4>ğŸ¯ æœ€çµ‚ã‚´ãƒ¼ãƒ«</h4>
        <p>å¿…è¦ãªã‚‰ã€ã“ã®ã‚·ãƒ©ãƒã‚¹ã‚’ãã®ã¾ã¾æˆæ¥­ã§ä½¿ãˆã‚‹å½¢ã«ã—ã¦ã€å„å›ã”ã¨ã«</p>
        <ul>
          <li><strong>é…å¸ƒç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ã‚³ãƒ¼ãƒ‰</strong>ï¼ˆãã®å›ã®é–‹å§‹æ™‚ç‚¹ã®çŠ¶æ…‹ï¼‰</li>
          <li><strong>è¬›å¸«ç”¨ã®æœ€çµ‚ã‚³ãƒ¼ãƒ‰</strong></li>
          <li>å—è¬›è€…å‘ã‘ <strong>"ä»Šæ—¥ã®å‘ªæ–‡ã‚«ãƒ¼ãƒ‰"</strong>ï¼ˆ3è¡Œãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆï¼‰</li>
        </ul>
        <p>ã¾ã§ã‚»ãƒƒãƒˆã§ä½œã‚Œã¾ã™ã€‚</p>
      </div>
    </div>

    <h3>ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ï¼ˆpreã‚¿ã‚°å†…ã®è¡¨ç¤ºãƒ†ã‚¹ãƒˆï¼‰</h3>
    <pre><code># ç¬¬1å›ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰
def prompt_title() -> str:
    """ã‚¯ã‚¨ã‚¹ãƒˆåã‚’å…¥åŠ›ã•ã›ã‚‹"""
    title = input("ã‚¯ã‚¨ã‚¹ãƒˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: ")
    return title

def normalize_title(title: str) -> str:
    """ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ•´å½¢ã™ã‚‹ï¼ˆç¬¬1å›ã§ä½œã‚‹é–¢æ•°ï¼‰"""
    # ã“ã®é–¢æ•°ã¯ç¬¬10å›ã¾ã§ç¾å½¹ã§ä½¿ã‚ã‚Œã‚‹ï¼
    normalized = title.strip()
    if normalized:
        # æœ€åˆã®æ–‡å­—ã‚’å¤§æ–‡å­—ã«
        normalized = normalized[0].upper() + normalized[1:]
    return normalized

# ãƒ‡ãƒ¢å®Ÿè¡Œ
if __name__ == "__main__":
    raw_title = prompt_title()
    clean_title = normalize_title(raw_title)
    print(f"ã‚¯ã‚¨ã‚¹ãƒˆã€Œ{clean_title}ã€ã‚’ç™»éŒ²ã—ã¾ã—ãŸï¼")</code></pre>

    <div class="math-container">
      <h4>KaTeX ãƒ†ã‚¹ãƒˆ: é€²æ—ç‡ã®è¨ˆç®—å¼</h4>
      <div class="katex">
        \text{é€²æ—ç‡} = \frac{\text{å®Œäº†ã‚¯ã‚¨ã‚¹ãƒˆæ•°}}{\text{ç·ã‚¯ã‚¨ã‚¹ãƒˆæ•°}} \times 100\%
      </div>
    </div>

    <div class="math-container">
      <h4>ç²å¾—XPã®è¨ˆç®—å¼</h4>
      <div class="katex">
        \text{ç·ç²å¾—XP} = \sum_{i=1}^{n} \text{XP}_i \times \delta_i, \quad \delta_i = \begin{cases} 1 & \text{å®Œäº†æ™‚} \\ 0 & \text{æœªå®Œæ™‚} \end{cases}
      </div>
    </div>
  </div>

  <div class="footer">
    ğŸ¨ ãƒãƒƒãƒ—ã‚¢ãƒ¼ãƒˆPythonã‚·ãƒ©ãƒã‚¹ - ã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ¼ãƒ‰é–‹ç™º ğŸš€ | å…¨10å›ã§ã€Œå‹•ãã‚·ã‚¹ãƒ†ãƒ ã€ã‚’ä½œã‚ŠãªãŒã‚‰Pythonã‚’ãƒã‚¹ã‚¿ãƒ¼ï¼
  </div>

  <!-- KaTeX JS -->
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
    onload="renderMathInElement(document.body, {
      delimiters: [
        {left: '$$', right: '$$', display: true},
        {left: '$', right: '$', display: false},
        {left: '\\\\(', right: '\\\\)', display: false},
        {left: '\\\\[', right: '\\\\]', display: true}
      ],
      throwOnError: false
    });">
  </script>

  <!-- =========================================================
       è¿½åŠ ï¼šå‹•ãä»•æ§˜æ›¸ï¼ˆJavaScriptå®Ÿè£…ï¼‰
       ========================================================= -->
  <script>
    (() => {
      "use strict";

      // ========== å›æ•° â†’ æ©Ÿèƒ½ã‚²ãƒ¼ãƒˆ ==========
      // 1:å…¥åŠ›æ•´å½¢, 2:è¿½åŠ /ä¸€è¦§, 3:å®Œäº†, 5:å‰Šé™¤+å®‰å…¨åŒ–, 6:æ¤œç´¢/ä¸¦æ›¿, 7:ä¿å­˜, 8:è–„ã„TDD, 9:CLIé¢¨, 10:é›†è¨ˆ+IKEAä¿å­˜
      const GATE = {
        normalize: 1,
        addList: 2,
        done: 3,
        delete: 5,
        searchSort: 6,
        storage: 7,
        tests: 8,
        cli: 9,
        stats: 10,
        ikeaPersist: 10,
      };

      const featureTextByLevel = (lv) => {
        if (lv <= 1) return "ç¬¬1å›ï¼šå…¥åŠ›â†’æ•´å½¢â†’è¡¨ç¤ºï¼ˆã¾ãšå‹•ã„ãŸï¼ï¼‰";
        if (lv === 2) return "ç¬¬2å›ï¼šãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤ï¼ˆè¿½åŠ ï¼†ä¸€è¦§ï¼‰";
        if (lv === 3) return "ç¬¬3å›ï¼šå®Œäº†ï¼ˆDONEï¼‰ã§ã‚¢ãƒ—ãƒªã£ã½ã•çˆ†ä¸ŠãŒã‚Š";
        if (lv === 4) return "ç¬¬4å›ï¼šãƒ¡ãƒ‹ãƒ¥ãƒ¼åŒ–ï¼ˆã“ã“ã§ã¯UIã®æ•´ç†ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰";
        if (lv === 5) return "ç¬¬5å›ï¼šå‰Šé™¤ï¼‹å…¥åŠ›å®‰å…¨åŒ–ï¼ˆè½ã¡ãªã„å¿«é©ã•ï¼‰";
        if (lv === 6) return "ç¬¬6å›ï¼šæ¤œç´¢ãƒ»ä¸¦ã³æ›¿ãˆï¼ˆä¾¿åˆ©ã•ã§ãƒ†ãƒ³ã‚·ãƒ§ãƒ³UPï¼‰";
        if (lv === 7) return "ç¬¬7å›ï¼šä¿å­˜ãƒ»å¾©å…ƒï¼ˆlocalStorageã§é“å…·åŒ–ï¼‰";
        if (lv === 8) return "ç¬¬8å›ï¼šè–„ã„TDDï¼ˆassertï¼‰ã§å‹•ä½œç¢ºèªã®ç­‹è‚‰";
        if (lv === 9) return "ç¬¬9å›ï¼šCLIé¢¨ã‚³ãƒãƒ³ãƒ‰ã§æ“ä½œï¼ˆé“å…·ã«ãªã£ãŸæ„Ÿå‹•ï¼‰";
        return "ç¬¬10å›ï¼šé›†è¨ˆï¼‹IKEAæ”¹é€ ã‚’ä¿å­˜ï¼ˆè‡ªåˆ†ã®ä½œå“ã¨ã—ã¦å®Œæˆï¼‰";
      };

      // ========== DOM ==========
      const $ = (id) => document.getElementById(id);

      const levelRange = $("levelRange");
      const levelNum = $("levelNum");
      const levelPill = $("levelPill");
      const featureHint = $("featureHint");

      const titleInput = $("titleInput");
      const xpInput = $("xpInput");
      const addBtn = $("addBtn");
      const sampleBtn = $("sampleBtn");
      const saveBtn = $("saveBtn");
      const resetBtn = $("resetBtn");

      const searchInput = $("searchInput");
      const sortSelect = $("sortSelect");
      const filterSelect = $("filterSelect");
      const ikeaMark = $("ikeaMark");

      const listEl = $("list");

      const kpiTotal = $("kpiTotal");
      const kpiDone = $("kpiDone");
      const kpiXp = $("kpiXp");
      const statsHint = $("statsHint");

      const runTestsBtn = $("runTestsBtn");
      const testResult = $("testResult");

      const consoleLog = $("consoleLog");
      const consoleInput = $("consoleInput");

      // ========== çŠ¶æ…‹ ==========
      const LS_KEY = "questboard_js_spec_v1";
      const LS_PREF = "questboard_js_spec_pref_v1";
      let level = 1;

      /** @type {{id:number,title:string,xp:number,done:boolean,createdAt:number}[]} */
      let tasks = [];

      /** @type {{doneMark:string, messageAdd:string}} */
      let pref = { doneMark: "âœ…", messageAdd: "ã‚¯ã‚¨ã‚¹ãƒˆå—æ³¨ï¼" };

      // ========== ä»•æ§˜ï¼ˆç¬¬1å›ï¼‰æ•´å½¢ ==========
      function normalizeTitle(s) {
        const raw = String(s ?? "");
        const trimmed = raw.trim();
        if (!trimmed) return "";
        return trimmed[0].toUpperCase() + trimmed.slice(1);
      }

      function safeInt(s, fallback = null) {
        const n = Number(s);
        if (!Number.isFinite(n)) return fallback;
        const ni = Math.floor(n);
        if (ni <= 0) return fallback;
        return ni;
      }

      function nextId() {
        let max = 0;
        for (const t of tasks) max = Math.max(max, t.id);
        return max + 1;
      }

      function addTask(title, xp) {
        const t = {
          id: nextId(),
          title,
          xp,
          done: false,
          createdAt: Date.now(),
        };
        tasks.push(t);
        return t;
      }

      function findTask(id) {
        return tasks.find(t => t.id === id) ?? null;
      }

      function completeTask(id) {
        const t = findTask(id);
        if (!t) return false;
        t.done = true;
        return true;
      }

      function deleteTask(id) {
        const idx = tasks.findIndex(t => t.id === id);
        if (idx < 0) return false;
        tasks.splice(idx, 1);
        return true;
      }

      function save() {
        if (level < GATE.storage) return false;
        try {
          localStorage.setItem(LS_KEY, JSON.stringify({ tasks }));
          if (level >= GATE.ikeaPersist) {
            localStorage.setItem(LS_PREF, JSON.stringify(pref));
          }
          return true;
        } catch {
          return false;
        }
      }

      function load() {
        try {
          const raw = localStorage.getItem(LS_KEY);
          if (raw) {
            const obj = JSON.parse(raw);
            if (obj && Array.isArray(obj.tasks)) tasks = obj.tasks;
          }
          const rp = localStorage.getItem(LS_PREF);
          if (rp) {
            const p = JSON.parse(rp);
            if (p && typeof p.doneMark === "string") pref.doneMark = p.doneMark;
            if (p && typeof p.messageAdd === "string") pref.messageAdd = p.messageAdd;
          }
        } catch {
          // ignore
        }
      }

      // ========== æç”» ==========
      function applyGates() {
        levelNum.textContent = String(level);
        levelPill.textContent = `ç¾åœ¨ï¼šç¬¬${level}å›ã¾ã§`;
        featureHint.textContent = featureTextByLevel(level);

        // ç¬¬2å›ä»¥å‰ã¯XPå…¥åŠ›ã‚’å¼±ã‚ã‚‹ï¼ˆè¿½åŠ ã¯ç¬¬2å›ã§è§£æ”¾ï¼‰
        xpInput.classList.toggle("disabled", level < GATE.addList);
        addBtn.classList.toggle("disabled", level < GATE.addList);

        // ç¬¬6å›ï¼ˆæ¤œç´¢/ä¸¦ã³æ›¿ãˆï¼‰
        searchInput.classList.toggle("disabled", level < GATE.searchSort);
        sortSelect.classList.toggle("disabled", level < GATE.searchSort);
        filterSelect.classList.toggle("disabled", level < GATE.done); // å®Œäº†ãŒãªã„ã¨å®Œäº†/æœªå®Œãƒ•ã‚£ãƒ«ã‚¿æ„å‘³è–„ã„

        // ç¬¬7å›ï¼ˆä¿å­˜ï¼‰
        saveBtn.classList.toggle("disabled", level < GATE.storage);

        // ç¬¬8å›ï¼ˆãƒ†ã‚¹ãƒˆï¼‰
        runTestsBtn.classList.toggle("disabled", level < GATE.tests);
        testResult.textContent = (level < GATE.tests) ? "ï¼ˆç¬¬8å›ã§è§£æ”¾ï¼‰" : "ï¼ˆæœªå®Ÿè¡Œï¼‰";

        // ç¬¬9å›ï¼ˆCLIï¼‰
        consoleInput.classList.toggle("disabled", level < GATE.cli);

        // ç¬¬10å›ï¼ˆIKEAä¿å­˜ï¼‹é›†è¨ˆï¼‰
        ikeaMark.classList.toggle("disabled", level < GATE.ikeaPersist);
        statsHint.textContent = (level < GATE.stats)
          ? "ç¬¬10å›ï¼šé›†è¨ˆï¼ˆå®Œäº†ç‡ãƒ»ç²å¾—XPï¼‰ãŒã“ã“ã«å‡ºã¾ã™"
          : "ç¬¬10å›ï¼šé›†è¨ˆOKï¼ˆå®Œäº†ç‡ãƒ»ç²å¾—XPãƒ»ç·æ•°ï¼‰";
      }

      function computeView() {
        let view = [...tasks];

        // filter
        const filter = filterSelect.value;
        if (level >= GATE.done) {
          if (filter === "undone") view = view.filter(t => !t.done);
          if (filter === "done") view = view.filter(t => t.done);
        }

        // search
        if (level >= GATE.searchSort) {
          const q = normalizeTitle(searchInput.value).toLowerCase();
          if (q) view = view.filter(t => t.title.toLowerCase().includes(q));
        }

        // sort
        if (level >= GATE.searchSort) {
          const mode = sortSelect.value;
          const cmpNum = (a,b) => a - b;
          if (mode === "idAsc") view.sort((a,b) => cmpNum(a.id,b.id));
          if (mode === "idDesc") view.sort((a,b) => cmpNum(b.id,a.id));
          if (mode === "xpDesc") view.sort((a,b) => cmpNum(b.xp,a.xp) || cmpNum(a.id,b.id));
          if (mode === "createdDesc") view.sort((a,b) => cmpNum(b.createdAt,a.createdAt));
        }

        return view;
      }

      function updateKpi() {
        const total = tasks.length;
        const done = tasks.filter(t => t.done).length;
        const xp = tasks.reduce((sum, t) => sum + (t.done ? t.xp : 0), 0);

        kpiTotal.textContent = String(total);
        kpiDone.textContent = String(done);
        kpiXp.textContent = String(xp);

        if (level >= GATE.stats) {
          const pct = total ? Math.round((done / total) * 100) : 0;
          statsHint.textContent = `å®Œäº†ç‡ï¼š${pct}% ï¼ ç²å¾—XPï¼š${xp} ï¼ ç·æ•°ï¼š${total}`;
        }
      }

      function render() {
        applyGates();
        updateKpi();

        const view = computeView();
        listEl.innerHTML = "";

        if (level < GATE.addList) {
          const li = document.createElement("li");
          li.className = "item";
          li.innerHTML = `
            <div class="titleline">ğŸ”’ ç¬¬2å›ã§ã€Œè¿½åŠ ï¼†ä¸€è¦§ã€ãŒè§£æ”¾ã•ã‚Œã¾ã™</div>
            <div class="meta">ä»Šã¯ç¬¬1å›ï¼šå…¥åŠ›â†’æ•´å½¢â†’è¡¨ç¤ºã®ä½“é¨“ã ã‘</div>
          `;
          listEl.appendChild(li);
          return;
        }

        if (view.length === 0) {
          const li = document.createElement("li");
          li.className = "item";
          li.innerHTML = `
            <div class="titleline">ï¼ˆã¾ã ã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ï¼‰</div>
            <div class="meta">ã€Œã‚µãƒ³ãƒ—ãƒ«æŠ•å…¥ã€ã‹ã€ä¸Šã§è¿½åŠ ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</div>
          `;
          listEl.appendChild(li);
          return;
        }

        for (const t of view) {
          const li = document.createElement("li");
          li.className = "item";

          const mark = t.done ? (pref.doneMark || "âœ…") : "â¬œ";
          const doneTag = t.done ? `<span class="tag done">${mark} å®Œäº†</span>` : `<span class="tag">ğŸ¯ æœªå®Œäº†</span>`;
          const xpText = (level >= GATE.addList) ? `XP ${t.xp}` : `XP ?`;
          const created = new Date(t.createdAt).toLocaleString();

          const canDone = level >= GATE.done && !t.done;
          const canDelete = level >= GATE.delete;

          li.innerHTML = `
            <div class="item-top">
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;">
                ${doneTag}
                <span class="tag" style="background:rgba(255,127,80,.12);border-color:rgba(255,127,80,.25);">ğŸ†” ${t.id}</span>
                <span class="tag" style="background:rgba(30,144,255,.10);border-color:rgba(30,144,255,.22);">âš¡ ${xpText}</span>
              </div>
              <div class="meta">${created}</div>
            </div>

            <div class="titleline">${mark} ${escapeHtml(t.title)} <span class="muted">ï¼ˆç¬¬${t.done ? 3 : 2}å›ç³»ã®ä»•æ§˜ï¼‰</span></div>

            <div class="actions">
              <button class="mini" data-act="done" data-id="${t.id}" ${canDone ? "" : "disabled"} title="ç¬¬3å›ã§è§£æ”¾">å®Œäº†</button>
              <button class="mini" data-act="delete" data-id="${t.id}" ${canDelete ? "" : "disabled"} title="ç¬¬5å›ã§è§£æ”¾">å‰Šé™¤</button>
            </div>
          `;

          // disabledçŠ¶æ…‹ã®è¦‹ãŸç›®
          const doneBtn = li.querySelector('button[data-act="done"]');
          const delBtn = li.querySelector('button[data-act="delete"]');
          if (doneBtn && doneBtn.disabled) doneBtn.classList.add("disabled");
          if (delBtn && delBtn.disabled) delBtn.classList.add("disabled");

          listEl.appendChild(li);
        }
      }

      function escapeHtml(s) {
        return String(s).replace(/[&<>"']/g, (c) => ({
          "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
        }[c]));
      }

      // ========== GUIã‚¤ãƒ™ãƒ³ãƒˆ ==========
      levelRange.addEventListener("input", () => {
        level = Number(levelRange.value);
        render();
      });

      addBtn.addEventListener("click", () => {
        if (level < GATE.addList) return;

        const normalized = (level >= GATE.normalize) ? normalizeTitle(titleInput.value) : String(titleInput.value ?? "");
        if (!normalized) {
          toast("ã‚¯ã‚¨ã‚¹ãƒˆåãŒç©ºã§ã™ï¼ˆå…¥åŠ›ã—ã¦ã­ï¼‰");
          return;
        }

        const xp = (level >= GATE.addList) ? (safeInt(xpInput.value, 1) ?? 1) : 1;
        const t = addTask(normalized, xp);

        toast(pref.messageAdd || "ã‚¯ã‚¨ã‚¹ãƒˆå—æ³¨ï¼");
        titleInput.value = "";
        xpInput.value = "1";

        if (level >= GATE.storage) save();
        render();

        // ä»•æ§˜ã£ã½ãï¼šè¿½åŠ ã—ãŸIDã‚’CLIã«å‡ºã—ã¦ãŠã
        logLine(`+ added #${t.id} "${t.title}" (xp=${t.xp})`);
      });

      sampleBtn.addEventListener("click", () => {
        if (level < GATE.addList) {
          toast("ç¬¬2å›ã§è§£æ”¾ï¼šã¾ãšã¯ç¬¬1å›ã®å…¥åŠ›â†’æ•´å½¢ã‚’ä½“é¨“ã—ã¦ã­");
          return;
        }
        const sample = [
          { title: " ç­‹ãƒˆãƒ¬ ", xp: 3 },
          { title: "èª­æ›¸", xp: 2 },
          { title: "éƒ¨å±‹ãã†ã˜", xp: 1 },
        ];
        for (const s of sample) {
          const title = (level >= GATE.normalize) ? normalizeTitle(s.title) : s.title;
          addTask(title, s.xp);
        }
        if (level >= GATE.done) completeTask(tasks[0]?.id ?? 1);
        if (level >= GATE.storage) save();
        toast("ã‚µãƒ³ãƒ—ãƒ«æŠ•å…¥ï¼");
        render();
        logLine("* sample loaded");
      });

      saveBtn.addEventListener("click", () => {
        if (level < GATE.storage) return;
        if (level >= GATE.ikeaPersist) {
          pref.doneMark = (ikeaMark.value || pref.doneMark || "âœ…").trim().slice(0, 6);
        }
        const ok = save();
        toast(ok ? "ä¿å­˜ã—ã¾ã—ãŸï¼ˆlocalStorageï¼‰" : "ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ");
        render();
      });

      resetBtn.addEventListener("click", () => {
        tasks = [];
        try { localStorage.removeItem(LS_KEY); } catch {}
        if (level >= GATE.ikeaPersist) {
          try { localStorage.removeItem(LS_PREF); } catch {}
          pref = { doneMark: "âœ…", messageAdd: "ã‚¯ã‚¨ã‚¹ãƒˆå—æ³¨ï¼" };
          ikeaMark.value = "";
        }
        toast("åˆæœŸåŒ–ã—ã¾ã—ãŸ");
        render();
        logLine("! reset");
      });

      searchInput.addEventListener("input", render);
      sortSelect.addEventListener("change", render);
      filterSelect.addEventListener("change", render);

      ikeaMark.addEventListener("input", () => {
        if (level < GATE.ikeaPersist) return;
        pref.doneMark = (ikeaMark.value || "âœ…").trim().slice(0, 6);
        render();
      });

      listEl.addEventListener("click", (ev) => {
        const btn = ev.target.closest("button");
        if (!btn) return;
        const act = btn.dataset.act;
        const id = safeInt(btn.dataset.id, null);
        if (!id) return;

        if (act === "done") {
          if (level < GATE.done) return;
          const ok = completeTask(id);
          toast(ok ? `#${id} å®Œäº†ï¼` : `#${id} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
          if (level >= GATE.storage) save();
          render();
          logLine(ok ? `done ${id}` : `done ${id} (not found)`);
        }

        if (act === "delete") {
          if (level < GATE.delete) return;
          const ok = deleteTask(id);
          toast(ok ? `#${id} å‰Šé™¤` : `#${id} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);
          if (level >= GATE.storage) save();
          render();
          logLine(ok ? `delete ${id}` : `delete ${id} (not found)`);
        }
      });

      // ========== è–„ã„TDDï¼ˆassertï¼‰ ==========
      function assert(cond, msg) {
        if (!cond) throw new Error("assert failed: " + msg);
      }

      runTestsBtn.addEventListener("click", () => {
        if (level < GATE.tests) return;

        try {
          // ä»•æ§˜ãƒ†ã‚¹ãƒˆï¼ˆè–„ãï¼‰ï¼šnormalize / add / done / delete ã®æœ€å°
          assert(normalizeTitle("  abc ") === "Abc", "normalizeTitle trims and capitalizes");
          const backup = JSON.parse(JSON.stringify(tasks));

          tasks = [];
          addTask("Test", 2);
          assert(tasks.length === 1, "addTask adds");
          const id = tasks[0].id;
          assert(id === 1, "first id is 1 when empty");
          if (level >= GATE.done) {
            assert(completeTask(id) === true, "completeTask ok");
            assert(tasks[0].done === true, "done flag true");
          }
          if (level >= GATE.delete) {
            assert(deleteTask(id) === true, "deleteTask ok");
            assert(tasks.length === 0, "deleted");
          }

          // restore
          tasks = backup;

          testResult.textContent = "âœ… ãƒ†ã‚¹ãƒˆOKï¼ˆè–„ã„assertï¼‰";
          toast("ãƒ†ã‚¹ãƒˆOK");
          logLine("tests: ok");
          render();
        } catch (e) {
          testResult.textContent = "âŒ ãƒ†ã‚¹ãƒˆå¤±æ•—: " + (e?.message ?? String(e));
          toast("ãƒ†ã‚¹ãƒˆå¤±æ•—");
          logLine("tests: fail " + (e?.message ?? String(e)));
        }
      });

      // ========== CLIé¢¨ ==========
      function logLine(s) {
        const now = new Date().toLocaleTimeString();
        consoleLog.textContent += `\n[${now}] ${s}`;
        consoleLog.scrollTop = consoleLog.scrollHeight;
      }

      function parseArgs(line) {
        // è¶…è»½é‡ï¼šã‚¯ã‚©ãƒ¼ãƒˆå¯¾å¿œã®ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚º
        const out = [];
        let cur = "";
        let q = null;
        for (let i=0; i<line.length; i++) {
          const c = line[i];
          if (q) {
            if (c === q) { q = null; continue; }
            cur += c;
            continue;
          }
          if (c === '"' || c === "'") { q = c; continue; }
          if (/\s/.test(c)) {
            if (cur) { out.push(cur); cur = ""; }
            continue;
          }
          cur += c;
        }
        if (cur) out.push(cur);
        return out;
      }

      function cliHelp() {
        return [
          "quest add \"title\" --xp 3",
          "quest list --undone | --done",
          "quest done 1",
          "quest delete 2",
          "quest search KEYWORD",
          "quest stats",
          "quest save",
        ].join("\n");
      }

      function cliExec(lineRaw) {
        if (level < GATE.cli) return;
        const line = String(lineRaw ?? "").trim();
        if (!line) return;

        const args = parseArgs(line);
        if (args[0] !== "quest") {
          logLine("unknown: å…ˆé ­ã¯ quest ã§å§‹ã‚ã¦ãã ã•ã„");
          return;
        }
        const cmd = args[1] || "help";

        const flags = new Set(args.filter(a => a.startsWith("--")));
        const getFlagValue = (name, fallback=null) => {
          const idx = args.indexOf(name);
          if (idx >= 0 && idx+1 < args.length) return args[idx+1];
          return fallback;
        };

        if (cmd === "help") {
          logLine(cliHelp());
          return;
        }

        if (cmd === "add") {
          if (level < GATE.addList) { logLine("locked: ç¬¬2å›ã§ add è§£æ”¾"); return; }
          const title = normalizeTitle(args[2] ?? "");
          if (!title) { logLine("error: title is empty"); return; }
          const xpRaw = getFlagValue("--xp", "1");
          const xp = safeInt(xpRaw, 1) ?? 1;
          const t = addTask(title, xp);
          if (level >= GATE.storage) save();
          render();
          logLine(`added #${t.id} "${t.title}" xp=${t.xp}`);
          return;
        }

        if (cmd === "list") {
          if (level < GATE.addList) { logLine("locked: ç¬¬2å›ã§ list è§£æ”¾"); return; }
          let view = [...tasks];
          if (level >= GATE.done) {
            if (flags.has("--undone")) view = view.filter(t => !t.done);
            if (flags.has("--done")) view = view.filter(t => t.done);
          }
          const lines = view.map(t => {
            const mark = t.done ? (pref.doneMark || "âœ…") : "â¬œ";
            return `${mark} #${t.id} ${t.title} (xp=${t.xp})`;
          });
          logLine(lines.length ? lines.join("\n") : "(empty)");
          return;
        }

        if (cmd === "done") {
          if (level < GATE.done) { logLine("locked: ç¬¬3å›ã§ done è§£æ”¾"); return; }
          const id = safeInt(args[2], null);
          if (!id) { logLine("error: id"); return; }
          const ok = completeTask(id);
          if (level >= GATE.storage) save();
          render();
          logLine(ok ? `done #${id}` : `not found #${id}`);
          return;
        }

        if (cmd === "delete") {
          if (level < GATE.delete) { logLine("locked: ç¬¬5å›ã§ delete è§£æ”¾"); return; }
          const id = safeInt(args[2], null);
          if (!id) { logLine("error: id"); return; }
          const ok = deleteTask(id);
          if (level >= GATE.storage) save();
          render();
          logLine(ok ? `deleted #${id}` : `not found #${id}`);
          return;
        }

        if (cmd === "search") {
          if (level < GATE.searchSort) { logLine("locked: ç¬¬6å›ã§ search è§£æ”¾"); return; }
          const q = String(args[2] ?? "").toLowerCase();
          const view = tasks.filter(t => t.title.toLowerCase().includes(q));
          const lines = view.map(t => `#${t.id} ${t.title}`);
          logLine(lines.length ? lines.join("\n") : "(no match)");
          return;
        }

        if (cmd === "stats") {
          if (level < GATE.stats) { logLine("locked: ç¬¬10å›ã§ stats è§£æ”¾"); return; }
          const total = tasks.length;
          const done = tasks.filter(t => t.done).length;
          const xp = tasks.reduce((s,t) => s + (t.done ? t.xp : 0), 0);
          const pct = total ? Math.round(done / total * 100) : 0;
          logLine(`total=${total} done=${done} rate=${pct}% xp=${xp}`);
          render();
          return;
        }

        if (cmd === "save") {
          if (level < GATE.storage) { logLine("locked: ç¬¬7å›ã§ save è§£æ”¾"); return; }
          if (level >= GATE.ikeaPersist) {
            pref.doneMark = (ikeaMark.value || pref.doneMark || "âœ…").trim().slice(0, 6);
          }
          const ok = save();
          logLine(ok ? "saved (localStorage)" : "save failed");
          render();
          return;
        }

        logLine(`unknown cmd: ${cmd}\n` + cliHelp());
      }

      consoleInput.addEventListener("keydown", (ev) => {
        if (ev.key !== "Enter") return;
        if (level < GATE.cli) return;
        const line = consoleInput.value;
        consoleInput.value = "";
        logLine("> " + line);
        cliExec(line);
      });

      // ========== ãƒˆãƒ¼ã‚¹ãƒˆ ==========
      let toastTimer = null;
      function toast(msg) {
        // æ—¢å­˜UIã‚’æ±šã•ãªã„è»½é‡toastï¼ˆtitleå±æ€§ã§ä»£æ›¿ï¼‰
        // ã“ã“ã§ã¯ãƒ˜ãƒƒãƒ€ãƒ¼ã® title ã‚’ä¸€ç¬ã ã‘å¤‰ãˆã‚‹
        const h = document.querySelector("header");
        if (!h) return;
        const prev = h.textContent;
        h.textContent = "ğŸ’¬ " + msg;
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => { h.textContent = prev; }, 900);
      }

      // ========== åˆæœŸåŒ– ==========
      function init() {
        load();
        // åˆæœŸã®IKEAè¡¨ç¤º
        ikeaMark.value = pref.doneMark || "âœ…";

        level = Number(levelRange.value);
        consoleLog.textContent = consoleLog.textContent.trimEnd();
        render();

        // ä»•æ§˜ã£ã½ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        logLine("boot: spec ready");
        if (tasks.length) logLine(`boot: loaded tasks=${tasks.length}`);
      }

      init();
    })();
  </script>
</body>
</html>