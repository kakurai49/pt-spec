<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>å®‡å®™ã®ç”»å»Š | file1</title>
<style>
:root{--a:185 163 255}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif;color:#eaf0ff;overflow-x:hidden}
a,button{color:inherit;font:inherit}
.stars,.stars2,.vignette{position:fixed;inset:0;pointer-events:none}
.stars{z-index:-3;opacity:.85;background-image:
radial-gradient(1px 1px at 10% 20%,rgba(255,255,255,.9) 50%,transparent 51%),
radial-gradient(1px 1px at 30% 80%,rgba(255,255,255,.7) 50%,transparent 51%),
radial-gradient(1px 1px at 70% 30%,rgba(255,255,255,.8) 50%,transparent 51%),
radial-gradient(2px 2px at 90% 60%,rgba(255,255,255,.5) 50%,transparent 51%),
radial-gradient(1px 1px at 40% 40%,rgba(255,255,255,.6) 50%,transparent 51%),
radial-gradient(1px 1px at 15% 55%,rgba(255,255,255,.6) 50%,transparent 51%);
background-size:260px 260px;animation:d1 90s linear infinite}
.stars2{z-index:-4;opacity:.55;filter:blur(.3px);background-image:
radial-gradient(1px 1px at 12% 72%,rgba(255,255,255,.7) 50%,transparent 51%),
radial-gradient(2px 2px at 52% 10%,rgba(255,255,255,.45) 50%,transparent 51%),
radial-gradient(1px 1px at 82% 42%,rgba(255,255,255,.65) 50%,transparent 51%),
radial-gradient(1px 1px at 35% 35%,rgba(255,255,255,.55) 50%,transparent 51%);
background-size:520px 520px;animation:d2 180s linear infinite}
.vignette{z-index:-2;background:
radial-gradient(circle at 50% 35%,rgba(120,80,190,.24),rgba(0,0,0,1) 65%),
radial-gradient(circle at 50% 35%,rgba(0,0,0,0) 0 55%,rgba(0,0,0,.88) 85%)}
@keyframes d1{to{transform:translate3d(-260px,260px,0)}}
@keyframes d2{to{transform:translate3d(-520px,520px,0)}}
@media (prefers-reduced-motion:reduce){.stars,.stars2{animation:none}}
header{position:sticky;top:0;backdrop-filter:blur(10px);background:rgba(0,0,25,.55);border-bottom:1px solid rgba(150,180,255,.18);z-index:10}
.wrap{max-width:980px;margin:0 auto;padding:14px 16px}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:42px;height:42px;border-radius:14px;display:grid;place-items:center;background:rgb(var(--a)/.14);border:1px solid rgb(var(--a)/.42);box-shadow:0 0 30px rgb(var(--a)/.10)}
.brand h1{margin:0;font-size:1.08rem;letter-spacing:.06em}
.brand p{margin:2px 0 0;opacity:.85;font-size:.92rem}
nav{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:12px;background:rgba(255,255,255,.06);border:1px solid rgba(150,180,255,.25);text-decoration:none}
.btn.primary{background:rgb(var(--a)/.14);border-color:rgb(var(--a)/.42)}
.btn:active{transform:translateY(1px)}
main{padding:18px 16px 40px}
h2{margin:0 0 10px;font-size:1.15rem}
p{margin:0 0 12px;opacity:.92;line-height:1.65}
.panel{border:1px solid rgba(150,180,255,.22);background:rgba(0,0,0,.35);border-radius:18px;padding:14px}
.canvas{width:100%;height:min(56vw,420px);display:block;border-radius:14px;background:#060713;border:1px solid rgba(150,180,255,.18);touch-action:manipulation}
.controls{display:grid;gap:10px;margin-top:12px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
label{font-size:.9rem;opacity:.9}
input[type="range"]{width:min(420px,100%)}
.hint{opacity:.82;font-size:.92rem}
small{opacity:.8;line-height:1.5}
#preview{width:100%;margin-top:12px;border-radius:14px;border:1px solid rgba(150,180,255,.18)}
</style>
</head>
<body>
<div class="stars" aria-hidden="true"></div>
<div class="stars2" aria-hidden="true"></div>
<div class="vignette" aria-hidden="true"></div>

<header>
  <div class="wrap">
    <div class="brand">
      <div class="logo" aria-hidden="true">ğŸ¨</div>
      <div>
        <h1>file1.htmlï½œå®‡å®™ã®ç”»å»Š</h1>
        <p>å®‡å®™ã®åˆ¥ä¸–ç•Œã‚’ã€Œçµµã€ã§ä½“é¨“</p>
      </div>
    </div>
    <nav aria-label="file1 navigation">
      <a class="btn" href="index.html">â† index</a>
      <a class="btn primary" href="file1_sub.html">å­«ãƒšãƒ¼ã‚¸ï¼šè‡ªç”±ãŠãˆã‹ã</a>
      <a class="btn" href="file2.html">æ¬¡ â†’</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <h2>å®‡å®™ã®ç”»ãƒšãƒ¼ã‚¸ï¼ˆç”Ÿæˆã‚¢ãƒ¼ãƒˆï¼‰</h2>
  <p>ãƒœã‚¿ãƒ³ã§ã€Œåˆ¥å®‡å®™ã€ã‚’ç”Ÿæˆã€‚ã•ã‚‰ã«ã‚­ãƒ£ãƒ³ãƒã‚¹ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨æµã‚Œæ˜ŸãŒèµ°ã‚Šã¾ã™ã€‚</p>

  <section class="panel">
    <canvas id="art" class="canvas" aria-label="å®‡å®™ã‚¢ãƒ¼ãƒˆã‚­ãƒ£ãƒ³ãƒã‚¹"></canvas>

    <div class="controls">
      <div class="row">
        <div style="flex:1 1 220px">
          <label for="density">æ˜Ÿã®å¯†åº¦</label>
          <input id="density" type="range" min="30" max="200" value="100">
          <div id="info" class="hint"></div>
        </div>
      </div>

      <div class="row">
        <button id="regen" class="btn primary" type="button">æ–°ã—ã„å®‡å®™ã‚’ç”Ÿæˆ</button>
        <button id="save" class="btn" type="button">PNGã§é–‹ã</button>
      </div>

      <small>â€» PNGã¯æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚ã‚¹ãƒãƒ›ã¯ç”»åƒã‚’é•·æŠ¼ã—ã§ä¿å­˜ã§ãã¾ã™ã€‚</small>
      <img id="preview" alt="ç”Ÿæˆã—ãŸå®‡å®™ã‚¢ãƒ¼ãƒˆã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" hidden>
    </div>
  </section>
</main>

<script>
(()=> {
  const c=document.getElementById('art');
  const ctx=c.getContext('2d');
  const base=document.createElement('canvas');
  const bctx=base.getContext('2d');
  const density=document.getElementById('density');
  const regen=document.getElementById('regen');
  const save=document.getElementById('save');
  const info=document.getElementById('info');
  const preview=document.getElementById('preview');

  let DPR=1,W=0,H=0,streaks=[];

  const rnd=(a,b)=>a+Math.random()*(b-a);
  const hsla=(h,s,l,a)=>`hsla(${h} ${s}% ${l}% / ${a})`;

  function fit(){
    DPR=Math.min(2,devicePixelRatio||1);
    W=Math.max(320,c.clientWidth);
    H=Math.max(240,c.clientHeight);
    c.width=W*DPR; c.height=H*DPR;
    base.width=c.width; base.height=c.height;
    ctx.setTransform(DPR,0,0,DPR,0,0);
    bctx.setTransform(DPR,0,0,DPR,0,0);
  }

  function drawBase(){
    fit();
    const w=W,h=H;
    bctx.clearRect(0,0,w,h);

    const bg=bctx.createRadialGradient(w*0.5,h*0.35,0,w*0.5,h*0.6,Math.max(w,h)*0.95);
    bg.addColorStop(0,'rgba(60,90,190,0.28)');
    bg.addColorStop(1,'rgba(0,0,0,1)');
    bctx.fillStyle=bg;
    bctx.fillRect(0,0,w,h);

    bctx.globalCompositeOperation='screen';
    for(let i=0;i<14;i++){
      const x=rnd(0,w), y=rnd(0,h), r=rnd(w*0.18,w*0.55);
      const hue=Math.floor(rnd(0,360));
      const g=bctx.createRadialGradient(x,y,0,x,y,r);
      g.addColorStop(0,hsla(hue,85,65,0.18));
      g.addColorStop(1,'transparent');
      bctx.fillStyle=g;
      bctx.beginPath(); bctx.arc(x,y,r,0,Math.PI*2); bctx.fill();
    }
    bctx.globalCompositeOperation='source-over';

    const d=Number(density.value);
    const count=Math.floor((w*h)/3500*(d/100));
    for(let i=0;i<count;i++){
      const x=rnd(0,w), y=rnd(0,h);
      const r=rnd(0.6,1.8);
      const a=rnd(0.25,0.95);
      bctx.fillStyle=`rgba(255,255,255,${a})`;
      bctx.fillRect(x,y,r,r);
      if(Math.random()<0.08){
        bctx.globalAlpha=a*0.7;
        bctx.beginPath(); bctx.arc(x,y,r*2.2,0,Math.PI*2); bctx.fill();
        bctx.globalAlpha=1;
      }
    }

    for(let p=0;p<2;p++){
      const pr=rnd(Math.min(w,h)*0.08, Math.min(w,h)*0.16);
      const px=rnd(pr+20, w-pr-20);
      const py=rnd(pr+20, h-pr-40);
      const hue=Math.floor(rnd(0,360));
      const g=bctx.createRadialGradient(px-pr*0.3,py-pr*0.3,pr*0.2,px,py,pr);
      g.addColorStop(0,hsla(hue,80,70,0.95));
      g.addColorStop(1,hsla((hue+30)%360,70,30,0.95));
      bctx.fillStyle=g;
      bctx.beginPath(); bctx.arc(px,py,pr,0,Math.PI*2); bctx.fill();

      bctx.globalAlpha=0.25;
      bctx.fillStyle='#fff';
      bctx.beginPath(); bctx.arc(px-pr*0.25,py-pr*0.25,pr*0.35,0,Math.PI*2); bctx.fill();
      bctx.globalAlpha=1;

      if(Math.random()<0.55){
        bctx.save();
        bctx.translate(px,py);
        bctx.rotate(rnd(-0.7,0.7));
        bctx.scale(1,0.35);
        bctx.strokeStyle='rgba(255,255,255,0.25)';
        bctx.lineWidth=2;
        bctx.beginPath();
        bctx.ellipse(0,0,pr*1.7,pr*1.1,0,0,Math.PI*2);
        bctx.stroke();
        bctx.restore();
      }
    }

    bctx.fillStyle='rgba(255,255,255,0.75)';
    bctx.font='14px system-ui';
    bctx.fillText('ç”»é¢ã‚¿ãƒƒãƒ—ã§æµã‚Œæ˜Ÿ âœ¨', 14, h-16);

    render();
  }

  function render(){
    ctx.clearRect(0,0,W,H);
    ctx.drawImage(base,0,0,W,H);
  }

  function addStreak(x,y){
    const dir=rnd(-0.2,0.2);
    streaks.push({x,y,vx:rnd(8,14),vy:rnd(-7,-4)+dir,life:1});
    if(streaks.length===1) requestAnimationFrame(anim);
  }

  function anim(){
    render();
    const w=W,h=H;
    for(const s of streaks){
      s.x+=s.vx; s.y+=s.vy; s.life-=0.03;
      const a=Math.max(0,s.life);
      ctx.strokeStyle=`rgba(255,255,255,${a})`;
      ctx.lineWidth=2.5;
      ctx.beginPath();
      ctx.moveTo(s.x,s.y);
      ctx.lineTo(s.x - s.vx*3.2, s.y - s.vy*3.2);
      ctx.stroke();
    }
    streaks=streaks.filter(s=>s.life>0 && s.x<w+200 && s.y>-200);
    if(streaks.length) requestAnimationFrame(anim);
  }

  c.addEventListener('pointerdown', (e)=>{
    const r=c.getBoundingClientRect();
    addStreak(e.clientX-r.left, e.clientY-r.top);
  });

  regen.addEventListener('click', drawBase);
  density.addEventListener('input', ()=>{
    info.textContent=`æ˜Ÿã®å¯†åº¦ï¼š${density.value}%`;
    drawBase();
  });

  save.addEventListener('click', ()=>{
    const url=c.toDataURL('image/png');
    preview.src=url; preview.hidden=false;
    window.open(url,'_blank');
  });

  addEventListener('resize', drawBase, {passive:true});
  info.textContent=`æ˜Ÿã®å¯†åº¦ï¼š${density.value}%`;
  drawBase();
})();
</script>
</body>
</html>