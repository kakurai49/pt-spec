<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="dark">
    <title>BEAT楽器トレーニング計画 - 型を選択する工学</title>
    <link rel="stylesheet" href="vega_theme.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <style>
        .training-section {
            border-radius: var(--r);
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.12);
            background: rgba(0, 0, 0, 0.32);
            box-shadow: var(--shadow);
        }

        .training-section + .training-section {
            margin-top: 18px;
        }

        .training-section h2 {
            margin-top: 0;
        }

        .katex-display {
            font-size: 1.1em;
            color: var(--text);
        }
    </style>
</head>
<body>
  <a class="skip" href="#main">本文へスキップ</a>
  <canvas id="starfield" aria-hidden="true"></canvas>

  <header class="course-header">
    <div class="wrap">
      <div class="nav">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <h1>Python Training</h1>
            <p>VEGA Course | Overview</p>
          </div>
        </div>
        <nav aria-label="VEGAコースナビゲーション">
          <div class="navlinks">
            <a href="../index.html">トップページ</a>
            <a href="./index.html">VEGAホーム</a>
            <a href="./overview.html">概要</a>
            <a href="./scope.html">スコープ</a>
            <a href="./spec.html">仕様</a>
          </div>
          <div class="cta">
            <a class="btn primary" href="../index.html#courses"><span class="dot" aria-hidden="true"></span>コース一覧</a>
            <a class="btn" href="./scope.html"><span class="dot" aria-hidden="true"></span>学習メニュー</a>
          </div>
          <button class="hamburger" id="hamburger" aria-expanded="false" aria-label="メニューを開く">
            <span aria-hidden="true"></span>
          </button>
        </nav>
      </div>
    </div>
    <div class="mobile" id="mobile">
      <div class="mobilePanel" role="dialog" aria-label="モバイルメニュー">
        <a href="../index.html">トップページ</a>
        <a href="./index.html">VEGAホーム</a>
        <a href="./overview.html">概要</a>
        <a href="./scope.html">スコープ</a>
        <a href="./spec.html">仕様</a>
        <div class="row">
          <a class="btn primary" href="../index.html#courses"><span class="dot" aria-hidden="true"></span>コース一覧</a>
          <a class="btn" href="./spec.html"><span class="dot" aria-hidden="true"></span>デモを見る</a>
        </div>
      </div>
    </div>
  </header>

  <main id="main">
    <div class="wrap flow">
      <section class="panel course-hero">
        <div class="page-header">
            <p class="eyebrow">VEGA COURSE</p>
            <h1>🎵 BEAT楽器トレーニング計画 🥁</h1>
            <p class="lede">トップページの宇宙感に合わせたダークトーンに統一し、「プログラミング＝型を選択する工学」の学習導線を整理しました。</p>
        </div>
        <div class="hero-actions">
          <a class="btn primary" href="./index.html"><span class="dot" aria-hidden="true"></span>Issue Backlog</a>
          <a class="btn" href="./scope.html"><span class="dot" aria-hidden="true"></span>1週間メニュー</a>
          <a class="btn" href="./spec.html"><span class="dot" aria-hidden="true"></span>WebAudio仕様</a>
        </div>
        <div class="meta-grid">
          <div class="meta-card">
            <strong>骨格</strong>
            観点 (S) と A(S) で型選択パターンを可視化
          </div>
          <div class="meta-card">
            <strong>ペース</strong>
            1日1時間 × 7日 / スマホでも読みやすい
          </div>
          <div class="meta-card">
            <strong>カラー</strong>
            トップページと同一のダーク + ネオンアクセント
          </div>
        </div>
      </section>

      <section class="panel flow">
        <div class="training-section section-1">
            <h2>前回の設計（論文の枠組み）</h2>
            <div class="math-container">
                <div class="katex-display">
                    G : (W, E) \rightarrow (S, A(S))
                </div>
            </div>
            <p>これをそのまま使い、題材を <strong>「BEATを作る楽器（＝Pythonで作る簡易ドラムマシン／ビート楽器）」</strong> に置き換えた 1日1時間×1週間のトレーニング計画です。<br>
            （あなたの骨格「プログラミング＝型を選択する工学」を中心に据えます）</p>
        </div>

        <!-- 残りのコンテンツは前回と同じですが、色管理システムにより適切なコントラストが保証されています -->
        <div class="training-section section-1">
            <h2>1. 世界 (W) と制約 (E) を題材に合わせて定義する</h2>
            
            <h3>世界 (W)：Pythonで作る「BEAT楽器」の世界</h3>
            <p>ここでの "世界" は、あなたが教える1週間の範囲で扱う <strong>ビート生成の可能性空間</strong>です。</p>
            <p>例：</p>
            <ul>
                <li>パターン（キック/スネア/ハイハットの16ステップ）</li>
                <li>テンポ（BPM）</li>
                <li>音色（クリック音・簡易シンセ）</li>
                <li>出力（テキスト可視化、WAVファイル）</li>
                <li>例外（不正なパターン、テンポ、ファイル）</li>
            </ul>
            <p>この (W) は本来連続・無限に広いので、論文通り <strong>観点 (S)</strong> で離散化して設計します。</p>

            <h3>制約 (E)：今回の学習設計に効く条件</h3>
            <ul>
                <li>初心者</li>
                <li>1日1時間 × 7日（合計7時間）</li>
                <li>最優先の骨格：<strong>「型を選ぶ → 変換の合成でシステムにする」</strong></li>
                <li>依存は増やさず、基本は <strong>Python標準ライブラリ中心</strong>（<code>dataclasses</code>, <code>wave</code>, <code>math</code>, <code>pathlib</code> など）</li>
                <li>1週間の到達成果（最終成果物）
                    <strong>パターン入力 → モデル化 → スケジューリング → レンダリング → 出力（WAV + 可視化）</strong>
                    のミニ楽器を完成させる</li>
            </ul>
        </div>

        <div class="training-section section-2">
            <h2>2. 中間生成物①：観点 (S) を提示する（何を区別して設計するか）</h2>
            <p>論文では、観点 (S) を <strong>観測関数</strong>として</p>
            <div class="math-container">
                <div class="katex-display">
                    o_S : W \rightarrow O_S
                </div>
            </div>
            <p>と定義し、観点で同じなら同値（(\sim_S)）として分割します。</p>

            <h3>✅ 今回の観点 (S)：あなたの骨格をそのまま観測軸にする</h3>
            <p>「ビート楽器のプログラム」(w \in W) を見たときに、次の4つで分類できるようにします：</p>
            <div class="math-container">
                <div class="katex-display">
                    o_S(w) = (\text{InputType},\ \text{ModelType},\ \text{ProcessType},\ \text{OutputType})
                </div>
            </div>
            <ul>
                <li><strong>InputType（入力型）</strong>：何を受け取るか<br>
                    例：<code>str</code>（1行パターン）、<code>list[str]</code>（複数トラック）、<code>Path</code>（ファイル）</li>
                <li><strong>ModelType（内部モデル型）</strong>：中でどう表すか<br>
                    例：<code>list[bool]</code>（16ステップ格子）、<code>dict[str, list[bool]]</code>（トラック辞書）、<code>dataclass Song</code></li>
                <li><strong>ProcessType（処理の型）</strong>：どう変換するか<br>
                    例：parse/validate → schedule → render → mix</li>
                <li><strong>OutputType（出力型）</strong>：何として出すか<br>
                    例：<code>str</code>（可視化）、<code>list[int]</code>（サンプル列）、<code>Path</code>（WAVファイル）</li>
            </ul>
            <blockquote>
                <p>ここが「プログラミング＝型を選択する工学」を、楽器づくりの形で"見える化"した (S) です。</p>
            </blockquote>
        </div>

        <div class="training-section section-3">
            <h2>3. 中間生成物②：(A(S)) を提示する（離散条件＝等価クラス集合）</h2>
            <p>論文通り、</p>
            <div class="math-container">
                <div class="katex-display">
                    A(S) = W/\sim_S \quad\text{where}\quad w_1 \sim_S w_2 \Leftrightarrow o_S(w_1)=o_S(w_2)
                </div>
            </div>
            <p>つまり「同じ型選択パターンの課題は同値」とみなして、1週間で押さえるべき <strong>代表クラス</strong>を作ります。</p>

            <h3>✅ (A(S))：ビート楽器で身につける「型選択パターン」10クラス</h3>
            <p>（= 7時間で"被覆"したい離散条件集合。各クラスに代表演習を1つ置きます）</p>
            
            <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>InputType</th>
                        <th>ModelType</th>
                        <th>ProcessType</th>
                        <th>OutputType</th>
                        <th>代表演習（代表元）</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>B1</td>
                        <td><code>str</code></td>
                        <td><code>int</code></td>
                        <td>parse + validate</td>
                        <td><code>int</code></td>
                        <td><code>"120"</code> → <code>120</code>（BPM、0や負数はどうする？）</td>
                    </tr>
                    <tr>
                        <td>B2</td>
                        <td><code>str</code></td>
                        <td><code>list[bool]</code></td>
                        <td>parse(pattern)</td>
                        <td><code>list[bool]</code></td>
                        <td><code>"x---x---x---x---"</code> → 16ステップのHit配列</td>
                    </tr>
                    <tr>
                        <td>B3</td>
                        <td><code>list[str]</code></td>
                        <td><code>dict[str,list[bool]]</code></td>
                        <td>parse(multitrack)</td>
                        <td><code>dict</code></td>
                        <td><code>K:... / S:... / H:...</code> をトラック辞書へ</td>
                    </tr>
                    <tr>
                        <td>B4</td>
                        <td><code>dict[...]</code></td>
                        <td><code>list[Hit]</code>（dataclass）</td>
                        <td>schedule(time)</td>
                        <td><code>list[Hit]</code></td>
                        <td>ステップ→時刻（秒/サンプル）イベント列へ</td>
                    </tr>
                    <tr>
                        <td>B5</td>
                        <td><code>dict[...]</code> or <code>list[Hit]</code></td>
                        <td><code>str</code></td>
                        <td>visualize</td>
                        <td><code>str</code></td>
                        <td>ビートをASCIIで表示（耳ではなく目で確認）</td>
                    </tr>
                    <tr>
                        <td>B6</td>
                        <td><code>Hit</code></td>
                        <td><code>list[float]</code></td>
                        <td>synth(1 hit)</td>
                        <td><code>list[float]</code></td>
                        <td>1打撃ぶんの波形を作る（減衰サイン等）</td>
                    </tr>
                    <tr>
                        <td>B7</td>
                        <td><code>list[Hit]</code></td>
                        <td><code>list[float]</code></td>
                        <td>render + mix</td>
                        <td><code>list[float]</code></td>
                        <td>イベント列を波形にして足し合わせる（クリップ対策）</td>
                    </tr>
                    <tr>
                        <td>B8</td>
                        <td><code>list[float]</code></td>
                        <td><code>bytes</code>/<code>list[int]</code></td>
                        <td>quantize(int16)</td>
                        <td><code>Path</code></td>
                        <td>float波形→int16化→WAV保存</td>
                    </tr>
                    <tr>
                        <td>B9</td>
                        <td><code>Path</code></td>
                        <td><code>Song</code>（dataclass）</td>
                        <td>system IO + parse</td>
                        <td><code>Song</code></td>
                        <td>パターンファイルを読みSongモデルにする</td>
                    </tr>
                    <tr>
                        <td>B10</td>
                        <td><code>args + Path</code></td>
                        <td>pipeline modules</td>
                        <td>architecture(pipeline)</td>
                        <td><code>Path + report</code></td>
                        <td>parse→validate→schedule→render→export を分割して完成</td>
                    </tr>
                </tbody>
            </table>
            </div>
            <blockquote>
                <p>この (A(S)) を、1日1時間×7日でできるだけ少ない演習で"被覆"する（論文の set cover / hitting set の発想）＝今回のメニュー設計です。</p>
            </blockquote>
        </div>

        <div class="training-section section-4">
            <h2>4. 1日1時間×1週間メニュー（BEAT楽器版）</h2>
            <p><strong>最終成果物イメージ（最初にゴールを固定）</strong></p>
            <ul>
                <li>入力例（パターンファイル <code>pattern.txt</code>）：</li>
                <pre>bpm=120
K:x---x---x---x---
S:----x-------x---
H:x-x-x-x-x-x-x-x-</pre>
                <li>出力：
                    <ul>
                        <li>画面：ASCIIビート表示</li>
                        <li>ファイル：<code>beat.wav</code>（クリック音でもOK）</li>
                    </ul>
                </li>
            </ul>

            <h3>Day1（1h）「ビートは"型付き変換"だと宣言する」</h3>
            <p><strong>被覆</strong>：B1, B2</p>
            <ul>
                <li>0:00–0:10<br>今日の合言葉：<strong>入力型→モデル型→出力型</strong>を口に出してから書く</li>
                <li>0:10–0:40
                    <ul>
                        <li><code>parse_bpm(s: str) -> int</code>（B1）</li>
                        <li><code>parse_steps(pattern: str) -> list[bool]</code>（B2）</li>
                    </ul>
                </li>
                <li>0:40–0:55<br><code>assert</code> を2本書く（例：長さ16、<code>x</code>の数）</li>
                <li>0:55–1:00<br>ふりかえり：「不正入力の"失敗の型"をどう選んだか」</li>
            </ul>
            <p><strong>成果物</strong>：テンポと1トラックのパターンが型で説明できる</p>

            <h3>Day2（1h）「複数楽器＝dict を選ぶ（モデル型の発明）」</h3>
            <p><strong>被覆</strong>：B3（＋B2再利用）</p>
            <ul>
                <li>0:00–0:10<br>なぜ <code>dict[str, list[bool]]</code> なのか（キー＝楽器名）</li>
                <li>0:10–0:45<br><code>parse_tracks(lines: list[str]) -> dict[str, list[bool]]</code>
                    <ul>
                        <li><code>K:...</code> の <code>K</code> は <code>str</code></li>
                        <li><code>...</code> は <code>list[bool]</code></li>
                    </ul>
                </li>
                <li>0:45–0:55<br>可視化を軽く入れる（文字列でOK）</li>
                <li>0:55–1:00<br>今日の型選択まとめ：「複数を扱うならdictが強い」</li>
            </ul>
            <p><strong>成果物</strong>：K/S/H を同じフォーマットで扱える</p>

            <h3>Day3（1h）「スケジューラ：格子→イベント列（時間の型）」</h3>
            <p><strong>被覆</strong>：B4</p>
            <ul>
                <li>0:00–0:10<br>"16ステップ格子"と"イベント列"は別のモデル型（どっちが何に強い？）</li>
                <li>0:10–0:45<br><code>@dataclass class Hit: instrument: str; step: int; time_sec: float</code>
                    <ul>
                        <li><code>schedule(tracks, bpm) -> list[Hit]</code></li>
                        <li>1ステップの秒数：<code>60/bpm/4</code>（16分音符想定）</li>
                    </ul>
                </li>
                <li>0:45–0:55<br>assert（イベント数、最初の時刻が0など）</li>
                <li>0:55–1:00<br>今日のまとめ：「"時間"を導入するとシステムっぽくなる」</li>
            </ul>
            <p><strong>成果物</strong>：ビートが"時刻付きイベント"として語れる</p>

            <h3>Day4（1h）「境界と不正：validate は"型設計"の中心」</h3>
            <p><strong>被覆</strong>：B1, B2, B3 の <strong>Refine（境界値分析・エラー推測）</strong> 版</p>
            <p>論文の考え方で言うと、EP（粗いクラス）を <strong>Refine</strong> して、境界や異常を別クラスに分ける日です。</p>
            <ul>
                <li>0:00–0:10<br>今日のテーマ：<strong>境界値（BVA）とエラー推測</strong></li>
                <li>0:10–0:40
                    <ul>
                        <li>BPM境界：<code>0, 1, 20, 300</code> など</li>
                        <li>パターン境界：長さ <code>0, 15, 16, 17</code></li>
                        <li>不正文字：<code>x</code> と <code>-</code> 以外<br>→ どのエラーを <code>ValueError</code> にするか、どれを補正するか（型選択）</li>
                    </ul>
                </li>
                <li>0:40–0:55<br>"テスト"として <code>assertRaises</code> はまだ要らない（初心者なら <code>try/except</code> でもOK）</li>
                <li>0:55–1:00<br>まとめ：「validate は仕様＝制約Eをコード化する行為」</li>
            </ul>
            <p><strong>成果物</strong>：落ち方（失敗の型）が設計できる</p>

            <h3>Day5（1h）「音を出す最小単位：1ヒット波形（モデル型を選ぶ）」</h3>
            <p><strong>被覆</strong>：B6</p>
            <ul>
                <li>0:00–0:10<br>波形は何の型？（例：<code>list[float]</code> ＝ -1〜1）</li>
                <li>0:10–0:45<br><code>synth_hit(instrument: str, duration_sec: float, sample_rate: int) -> list[float]</code>
                    <ul>
                        <li>Kickは低い周波数、Hatは高い周波数…のような"ルール"を持たせる</li>
                        <li>減衰（エンベロープ）を掛けて「音っぽくする」</li>
                    </ul>
                </li>
                <li>0:45–0:55<br>音が出なくてもOK：まずは波形の長さと最大値で確認（観測＝O_S）</li>
                <li>0:55–1:00<br>今日のまとめ：「出力を耳に頼らず、数値で観測する」</li>
            </ul>
            <p><strong>成果物</strong>：1打撃分の"音素材"が作れる</p>

            <h3>Day6（1h）「レンダリングとミキシング：イベント列→波形」</h3>
            <p><strong>被覆</strong>：B7（＋B4/B6再利用）</p>
            <ul>
                <li>0:00–0:10<br>合成の型：<code>list[Hit] -> list[float]</code></li>
                <li>0:10–0:45<br><code>render(hits: list[Hit], bpm: int, sample_rate: int) -> list[float]</code>
                    <ul>
                        <li>Hitのtimeをサンプル位置に変換して足す</li>
                        <li>同時発音（Kick+Hatなど）で値が大きくなる → クリップ対策（正規化/制限）</li>
                    </ul>
                </li>
                <li>0:45–0:55<br>観測（observation）的チェック：
                    <ul>
                        <li>長さが想定通りか</li>
                        <li>最大振幅が1.0を超えていないか</li>
                    </ul>
                </li>
                <li>0:55–1:00<br>まとめ：「"混ざる"は型の問題（float→int16等）に直結する」</li>
            </ul>
            <p><strong>成果物</strong>：ビート全体の波形（float列）ができる</p>

            <h3>Day7（1h）「楽器として完成：WAV出力＋パイプライン分割」</h3>
            <p><strong>被覆</strong>：B8, B9, B10</p>
            <ul>
                <li>0:00–0:10<br>アーキテクチャは変換の合成：</li>
                <div class="math-container">
                    <div class="katex-display">
                        \text{Path} \to \text{Song} \to \text{Hits} \to \text{Wave} \to \text{WAV Path}
                    </div>
                </div>
                <li>0:10–0:40<br>分割してつなぐ（関数の"型契約"で繋ぐ）
                    <ol>
                        <li><code>load_song(path: Path) -> Song</code>（B9）</li>
                        <li><code>schedule(song: Song) -> list[Hit]</code></li>
                        <li><code>render(...) -> list[float]</code></li>
                        <li><code>write_wav(path: Path, wave: list[float], sample_rate: int) -> None</code>（B8）</li>
                    </ol>
                </li>
                <li>0:40–0:55<br><code>main()</code> を作り、引数や固定ファイル名で動かす（B10）</li>
                <li>0:55–1:00<br>1週間のまとめを一文に固定：<br><strong>「ビート楽器は、型を選び、変換器を合成して作る」</strong></li>
            </ul>
            <p><strong>成果物</strong>：<code>beat.wav</code> を生成できる"Python楽器"が完成</p>
        </div>

        <div class="training-section section-5">
            <h2>5. 仕上げ：この題材で「型を選ぶ工学」が伝わるポイント</h2>
            <ul>
                <li><strong>格子モデル</strong>（<code>dict[str, list[bool]]</code>）を選ぶと編集が強い</li>
                <li><strong>イベントモデル</strong>（<code>list[Hit]</code>）を選ぶと時間・レンダリングが強い</li>
                <li><strong>波形モデル</strong>（<code>list[float]</code> → <code>int16</code>）を選ぶと出力（WAV）が強い</li>
                <li>どの型を選ぶかで、設計の"やりやすさ"が変わる<br>→ ここがあなたの骨格そのもの</li>
            </ul>
        </div>
        </section>
      </div>
    </main>

    <div class="footer">
        <p>BEAT楽器トレーニング計画 — VEGAコース | 宇宙感ダークテーマに統一</p>
    </div>

    <!-- KaTeX JS -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body, {
            delimiters: [
                {left: '$$', right: '$$', display: true},
                {left: '$', right: '$', display: false},
                {left: '\\(', right: '\\)', display: false},
                {left: '\\[', right: '\\]', display: true}
            ],
            throwOnError: false
        });"></script>
    <script src="vega_shared.js"></script>
</body>
</html>
