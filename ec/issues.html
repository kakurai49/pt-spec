<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epic: Eã‚«ãƒ¼ãƒ‰ï¼‹DTD ãƒ†ã‚¹ãƒˆç”Ÿæˆ ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</title>
    <link rel="stylesheet" href="pop3_style.css">
    <!-- KaTeX ã® CSS ã¨ JS ã‚’è¿½åŠ  -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
    <!-- è¿½åŠ ã®ã‚«ãƒ©ãƒ¼ãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆã¨è£…é£¾ã‚¹ã‚¿ã‚¤ãƒ« -->
    <style>
        :root {
            /* ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆå®šç¾© */
            --primary-bg: #ffdd57;
            --secondary-bg: #ff4081;
            --accent-1: #1e90ff;
            --accent-2: #ffcc00;
            --text-dark: #222;
            --text-light: #fff;
            --container-bg: #fff;
            --success: #2ecc71;
            --warning: #f39c12;
            --error: #e74c3c;
            --border-radius: 15px;
            --shadow: 0 0 20px rgba(0, 0, 0, 0.2);
        }

        body {
            background: linear-gradient(135deg, var(--primary-bg) 0%, var(--accent-2) 100%);
            color: var(--text-dark);
            background-attachment: fixed;
        }

        header {
            background: linear-gradient(90deg, var(--secondary-bg) 0%, #ff0066 100%);
            color: var(--text-light);
            border-bottom: 5px solid var(--accent-2);
        }

        .container {
            background-color: var(--container-bg);
            border: 5px solid var(--secondary-bg);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(45deg, var(--secondary-bg), var(--accent-1), var(--accent-2));
            z-index: -1;
            filter: blur(20px);
            opacity: 0.3;
        }

        h2 {
            background: linear-gradient(90deg, var(--secondary-bg), var(--accent-1));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: inline-block;
            padding: 0 10px;
            border-bottom: 3px solid var(--secondary-bg);
        }

        .character {
            background: linear-gradient(145deg, #ffffff, #ffed99);
            border-left: 10px solid var(--secondary-bg);
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .character:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 15px 15px 30px rgba(0, 0, 0, 0.25);
        }

        .character::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary-bg), var(--accent-1), var(--accent-2));
        }

        .metadata {
            background: linear-gradient(90deg, rgba(255, 64, 129, 0.1), rgba(30, 144, 255, 0.1));
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid var(--accent-1);
        }

        .metadata-item {
            display: inline-block;
            margin-right: 20px;
            font-weight: bold;
        }

        .metadata-key {
            color: var(--secondary-bg);
            font-weight: bold;
        }

        .labels {
            display: inline-block;
            padding: 5px 15px;
            background: linear-gradient(90deg, var(--secondary-bg), var(--accent-1));
            color: white;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
        }

        pre {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-left: 5px solid var(--accent-1);
            color: var(--text-dark);
            position: relative;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
        }

        pre::before {
            content: 'ğŸ“„';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2em;
            opacity: 0.5;
        }

        a {
            background: linear-gradient(90deg, transparent 50%, var(--accent-1) 50%);
            background-size: 200% 100%;
            background-position: 100% 0;
            transition: all 0.3s ease;
            padding: 2px 5px;
            border-radius: 3px;
        }

        a:hover {
            background-position: 0 0;
            color: var(--text-light) !important;
            text-decoration: none;
        }

        .footer {
            background: linear-gradient(90deg, var(--secondary-bg) 0%, #ff0066 100%);
            color: var(--text-light);
            border-top: 5px solid var(--accent-2);
        }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º */
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-left: 10px;
            font-size: 0.8em;
            vertical-align: middle;
        }

        .status.epic {
            background: linear-gradient(90deg, #9b59b6, #8e44ad);
            color: white;
        }

        .status.setup {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: white;
        }

        .status.domain {
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: white;
        }

        .status.application {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            color: white;
        }

        .status.players {
            background: linear-gradient(90deg, #f39c12, #d35400);
            color: white;
        }

        .status.dtd {
            background: linear-gradient(90deg, #1abc9c, #16a085);
            color: white;
        }

        .status.scripts {
            background: linear-gradient(90deg, #34495e, #2c3e50);
            color: white;
        }

        .status.documentation {
            background: linear-gradient(90deg, #7f8c8d, #95a5a6);
            color: white;
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ´ Epic: Eã‚«ãƒ¼ãƒ‰ï¼‹DTD ãƒ†ã‚¹ãƒˆç”Ÿæˆ ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</h1>
    </header>

    <div class="container">
        <div class="character">
            <h2>Title: [ec] Epic: Eã‚«ãƒ¼ãƒ‰ï¼‹DTD ãƒ†ã‚¹ãƒˆç”Ÿæˆï¼ˆS/A(S)/é›†åˆè¢«è¦†ï¼‰ã‚’å®Œäº†ã¾ã§ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° <span class="status epic">epic</span> <span class="status tracking">tracking</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-001</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> .</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">epic</span>
                    <span class="labels">tracking</span>
                </div>
            </div>
            <h3>ç›®çš„</h3>
            <p>æ·»ä»˜ä»•æ§˜æ›¸ã«åŸºã¥ãã€3å±¤ï¼ˆDomain / Application / DTDï¼‰ã§ Eã‚«ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã—ã€DTDæ–¹å¼ã®ãƒ†ã‚¹ãƒˆç”Ÿæˆï¼ˆå€™è£œç”Ÿæˆâ†’è¦³æ¸¬â†’é›†åˆè¢«è¦†â†’pytestç”Ÿæˆï¼‰ã¾ã§å®Œæˆã•ã›ã‚‹ã€‚</p>
            
            <h3>ã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆä»•æ§˜æº–æ‹ ï¼‰</h3>
            <ul>
                <li>Domain: ãƒ«ãƒ¼ãƒ«ï¼ˆå‹æ•—åˆ¤å®šã€æ‰‹æœ­æ¶ˆè²»ã€çµ‚äº†åˆ¤å®šï¼‰ã€ä¾‹å¤–ï¼ˆIllegalTypeï¼‰ã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ </li>
                <li>Application: bout å®Ÿè¡Œã€match å®Ÿè¡Œã€swap_interval ã«ã‚ˆã‚‹é™£å–¶äº¤ä»£</li>
                <li>DTD: è¦³æ¸¬ï¼ˆSï¼‰ã€è¦æ±‚é›†åˆï¼ˆA(S)=obligationsï¼‰ã€å€™è£œç”Ÿæˆã€é›†åˆè¢«è¦†ï¼ˆgreedy set coverï¼‰</li>
                <li>scripts/generate_tests.py: JSONï¼‹pytest ç”Ÿæˆ</li>
            </ul>
            
            <h3>éã‚¹ã‚³ãƒ¼ãƒ—</h3>
            <ul>
                <li>GUI / ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¯¾æˆ¦</li>
                <li>åŸä½œã®å¿ƒç†æˆ¦å¼·åˆ¶</li>
                <li>é‡‘éŠ­ãƒ»ãƒšãƒŠãƒ«ãƒ†ã‚£åˆ¶åº¦</li>
            </ul>
            
            <h3>å®Œäº†æ¡ä»¶ï¼ˆDefinition of Doneï¼‰</h3>
            <ul>
                <li>Domain ã®ç´”ç²‹ãƒ­ã‚¸ãƒƒã‚¯ãŒ pytest ã§ç¶²ç¾…ã•ã‚Œã‚‹</li>
                <li>match ã® swap_interval äº¤ä»£ãŒæ­£ã—ãå‹•ä½œã™ã‚‹</li>
                <li>obligationsï¼ˆ18å€‹ï¼‰ã‚’ base/random å€™è£œï¼‹greedy set cover ã§è¢«è¦†ã§ãã‚‹</li>
                <li>scripts/generate_tests.py å®Ÿè¡Œã§
                    <ul>
                        <li>generated_suite.json</li>
                        <li>tests_generated.py</li>
                    </ul>
                    ãŒç”Ÿæˆã•ã‚Œã€pytest -q tests_generated.py ãŒé€šã‚‹
                </li>
            </ul>
            
            <h3>ä¾å­˜Issue</h3>
            <ul>
                <li>SBX-EC-002 ï½ SBX-EC-018</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] ãƒªãƒã‚¸ãƒˆãƒªé››å½¢ï¼ˆec ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ ï¼pytest åŸºç›¤ï¼‰ <span class="status setup">setup</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-002</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/__init__.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">setup</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²ï¼ˆDomain/Application/DTD/playersï¼‰ã«æ²¿ã£ã¦ Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½œã‚Šã€pytest ãŒå‹•ãæœ€å°åŸºç›¤ã‚’ç”¨æ„ã™ã‚‹ã€‚</p>
            
            <h3>ä½œæˆã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ãƒ•ã‚¡ã‚¤ãƒ«</h3>
            <ul>
                <li>ec/__init__.py</li>
                <li>ec/domain/__init__.py</li>
                <li>ec/application/__init__.py</li>
                <li>ec/players/__init__.py</li>
                <li>ec/dtd/__init__.py</li>
                <li>scripts/generate_tests.pyï¼ˆã“ã®Issueã§ã¯ç©ºã§ã‚‚ã‚ˆã„ï¼‰</li>
                <li>tests/test_smoke_imports.py</li>
            </ul>
            
            <h3>æœŸå¾…ã™ã‚‹æ§‹é€ </h3>
            <pre>
- ec/
  - domain/
  - application/
  - players/
  - dtd/
- scripts/
- tests/</pre>
            
            <h3>åˆ¶ç´„</h3>
            <ul>
                <li>Python 3.x</li>
                <li>Domain å±¤ã¯ I/O ã‚’æŒãŸãªã„ï¼ˆprint ã—ãªã„ / ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã—ãªã„ï¼‰</li>
                <li>ä¾å­˜ã¯æœ€å°ï¼ˆæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‹pytestï¼‰</li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆè¨ˆç”»</h3>
            <p>tests/test_smoke_imports.py</p>
            <ul>
                <li>import ec ãŒæˆåŠŸã™ã‚‹</li>
                <li>import ec.domain / ec.application / ec.players / ec.dtd ãŒæˆåŠŸã™ã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>pytest -q ãŒ fail 0 ã§çµ‚äº†ã™ã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Domain: IllegalTypeï¼ˆä¸æ­£åˆ†é¡ï¼‰ã¨ IllegalMoveErrorï¼ˆä¾‹å¤–ï¼‰ <span class="status domain">domain</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-003</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/domain/errors.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">domain</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ã®ã€Œä¾‹å¤–ã¯æ„å‘³ã®ã‚ã‚‹å‹ï¼ˆIllegalTypeï¼‰ã§è¡¨ç¾ã—ã€ãƒ†ã‚¹ãƒˆã§åˆ†é¡å¯èƒ½ã€ã‚’æº€ãŸã™ã€‚</p>
            
            <h3>å®Ÿè£…è¦ä»¶</h3>
            <p>ä¸æ­£æ¤œå‡ºï¼ˆæœ€ä½é™ï¼‰</p>
            <ul>
                <li>NOT_IN_HANDï¼ˆæ‰‹æœ­ã«ãªã„ã‚«ãƒ¼ãƒ‰æå‡ºï¼‰</li>
                <li>AFTER_TERMINALï¼ˆbout çµ‚äº†å¾Œã®æå‡ºï¼‰</li>
            </ul>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/domain/errors.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>IllegalTypeï¼ˆEnumï¼‰
                    <ul>
                        <li>NOT_IN_HAND</li>
                        <li>AFTER_TERMINAL</li>
                    </ul>
                </li>
                <li>IllegalMoveError(Exception)
                    <ul>
                        <li>å±æ€§:
                            <ul>
                                <li>illegal_type: IllegalType</li>
                                <li>message: str</li>
                                <li>details: dict[str, object] | Noneï¼ˆä»»æ„ã€‚side/card/round ç­‰ã‚’æ ¼ç´ã§ãã‚‹ï¼‰</li>
                            </ul>
                        </li>
                        <li>__str__ ã« "{illegal_type}: {message}" ã‚’å«ã‚ã‚‹</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_domain_errors.py</p>
            <ul>
                <li>IllegalType ã®ãƒ¡ãƒ³ãƒãŒå­˜åœ¨ã™ã‚‹ã“ã¨</li>
                <li>IllegalMoveError ã®å±æ€§å‚ç…§ãŒå¯èƒ½ãªã“ã¨</li>
                <li>str(e) ã« illegal_type ã¨ message ãŒå«ã¾ã‚Œã‚‹ã“ã¨</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>pytest ã§ illegal_type ã«ã‚ˆã‚‹åˆ†é¡ãŒæ©Ÿæ¢°çš„ã«ã§ãã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Domain: CardType/Side/DecisivePair ã¨ decisive_pair_from_cards <span class="status domain">domain</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-004</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/domain/cards.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">domain</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 8.1 cards.py ã‚’å®Ÿè£…ã—ã€æ±ºç€çµ„åˆã›ï¼ˆDecisivePairï¼‰ã‚’åˆ¤å®šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/domain/cards.py ã«ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>CardTypeï¼ˆEnumï¼‰
                    <ul>
                        <li>EMPEROR, CITIZEN, SLAVE</li>
                    </ul>
                </li>
                <li>Sideï¼ˆEnumï¼‰
                    <ul>
                        <li>EMPEROR_SIDE, SLAVE_SIDE</li>
                    </ul>
                </li>
                <li>DecisivePairï¼ˆEnumï¼‰
                    <ul>
                        <li>EMPEROR_VS_CITIZEN</li>
                        <li>CITIZEN_VS_SLAVE</li>
                        <li>SLAVE_VS_EMPEROR</li>
                    </ul>
                </li>
                <li>decisive_pair_from_cards(emperor_card: CardType, slave_card: CardType) -> DecisivePair | None
                    <ul>
                        <li>CITIZEN vs CITIZEN ã¯ Noneï¼ˆDRAWã§æ±ºç€ãƒšã‚¢ãªã—ï¼‰</li>
                        <li>(EMPEROR, CITIZEN) -> EMPEROR_VS_CITIZEN</li>
                        <li>(CITIZEN, SLAVE) -> CITIZEN_VS_SLAVE</li>
                        <li>(EMPEROR, SLAVE) -> SLAVE_VS_EMPEROR</li>
                        <li>ä¸Šè¨˜ä»¥å¤–ã¯ None ã§ã‚ˆã„ï¼ˆç™ºç”Ÿã—ãªã„æƒ³å®šï¼‰</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_domain_cards.py</p>
            <ul>
                <li>Enum ã®ãƒ¡ãƒ³ãƒãŒæƒã£ã¦ã„ã‚‹</li>
                <li>decisive_pair_from_cards ã® 4ã‚±ãƒ¼ã‚¹ï¼ˆ3æ±ºç€+DRAWï¼‰ãŒä»•æ§˜é€šã‚Š</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>å¾Œç¶š rules.py ãŒã“ã®é–¢æ•°ã‚’åˆ©ç”¨ã§ãã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Domain: Handï¼ˆãƒãƒ«ãƒã‚»ãƒƒãƒˆï¼‰å®Ÿè£… <span class="status domain">domain</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-005</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/domain/hand.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">domain</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 8.2 hand.pyï¼šæ‰‹æœ­ã®æ®‹æ•°ç®¡ç†ï¼ˆãƒãƒ«ãƒã‚»ãƒƒãƒˆï¼‰ã‚’æä¾›ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/domain/hand.py ã« Hand ã‚’å®Ÿè£…ã™ã‚‹ï¼ˆdataclass æ¨å¥¨ï¼‰</p>
            <ul>
                <li>å†…éƒ¨: dict[CardType, int]</li>
                <li>classmethod
                    <ul>
                        <li>emperor_side_hand(): EMPEROR=1, CITIZEN=4, SLAVE=0</li>
                        <li>slave_side_hand(): SLAVE=1, CITIZEN=4, EMPEROR=0</li>
                    </ul>
                </li>
                <li>methods
                    <ul>
                        <li>has(card) -> boolï¼ˆæ®‹æ•°>0ï¼‰</li>
                        <li>remove(card) -> Noneï¼ˆæ®‹æ•°0ãªã‚‰ ValueErrorï¼‰</li>
                        <li>remaining(card) -> int</li>
                        <li>copy() -> Handï¼ˆæ·±ã„ã‚³ãƒ”ãƒ¼ï¼‰</li>
                        <li>total_cards() -> intï¼ˆä»»æ„ï¼‰</li>
                    </ul>
                </li>
            </ul>
            
            <h3>åˆ¶ç´„</h3>
            <ul>
                <li>Domain å±¤ï¼šI/O ãªã—</li>
                <li>copy ãŒæ­£ã—ãç‹¬ç«‹ã—ã¦ã„ã‚‹ã“ã¨ï¼ˆãƒ†ã‚¹ãƒˆã§ä¿è¨¼ï¼‰</li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_domain_hand.py</p>
            <ul>
                <li>emperor_side_hand ã®åˆæœŸæšæ•°ãŒæ­£ã—ã„</li>
                <li>slave_side_hand ã®åˆæœŸæšæ•°ãŒæ­£ã—ã„</li>
                <li>remove ã«ã‚ˆã‚Š remaining ãŒæ¸›ã‚‹</li>
                <li>remaining==0 ã® remove ã¯ ValueError</li>
                <li>copy ãŒç‹¬ç«‹ï¼ˆç‰‡æ–¹ remove ã—ã¦ã‚‚ã‚‚ã†ç‰‡æ–¹ã¸å½±éŸ¿ã—ãªã„ï¼‰</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>rules.step ã®ã€Œæ‰‹æœ­ã«ãªã„ã‚«ãƒ¼ãƒ‰ã€åˆ¤å®šã®åŸºç›¤ãŒæƒã†</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Domain: BoutState / RoundRecord / RoundOutcomeï¼ˆçŠ¶æ…‹ã¨å±¥æ­´ï¼‰ <span class="status domain">domain</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-006</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/domain/state.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">domain</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ã® state æ§‹é€ ï¼ˆbout ã®çŠ¶æ…‹é·ç§»ã‚’è¡¨ç¾ï¼‰ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/domain/state.py ã«ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>RoundOutcomeï¼ˆEnum æ¨å¥¨ï¼‰
                    <ul>
                        <li>DRAW</li>
                        <li>EMPEROR_WINï¼ˆEMPEROR_SIDE ã®å‹ã¡ï¼‰</li>
                        <li>SLAVE_WINï¼ˆSLAVE_SIDE ã®å‹ã¡ï¼‰</li>
                    </ul>
                </li>
                <li>RoundRecordï¼ˆdataclass, frozen æ¨å¥¨ï¼‰
                    <ul>
                        <li>round_index: intï¼ˆ0-basedï¼‰</li>
                        <li>emperor_card: CardType</li>
                        <li>slave_card: CardType</li>
                        <li>outcome: RoundOutcome</li>
                        <li>decisive_pair: DecisivePair | None</li>
                    </ul>
                </li>
                <li>BoutStateï¼ˆdataclass æ¨å¥¨ï¼‰
                    <ul>
                        <li>emperor_hand: Hand</li>
                        <li>slave_hand: Hand</li>
                        <li>terminal: bool</li>
                        <li>winner: Side | None</li>
                        <li>history: list[RoundRecord]</li>
                        <li>decisive_pair: DecisivePair | Noneï¼ˆterminal æ™‚ã®ã¿é Noneï¼‰</li>
                    </ul>
                </li>
                <li>BoutState.initial() -> BoutState
                    <ul>
                        <li>emperor_hand=Hand.emperor_side_hand()</li>
                        <li>slave_hand=Hand.slave_side_hand()</li>
                        <li>terminal=False, winner=None, history=[], decisive_pair=None</li>
                    </ul>
                </li>
            </ul>
            
            <h3>è£œè¶³</h3>
            <p>draw å›æ•°ã¯ history ã® outcome==DRAW ã®å€‹æ•°ã§ç®—å‡ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼ˆDTD è¦³æ¸¬ o3 ç”¨ï¼‰</p>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_domain_state.py</p>
            <ul>
                <li>BoutState.initial() ã®æ‰‹æœ­æšæ•°ãŒä»•æ§˜é€šã‚Š</li>
                <li>åˆæœŸ terminal=False, winner=None, history==[] ã‚’æº€ãŸã™</li>
                <li>RoundRecord ãŒç”Ÿæˆã§ãã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>rules.step ãŒ BoutState ã‚’å…¥å‡ºåŠ›ã¨ã—ã¦æ‰±ãˆã‚‹åœŸå°ãŒå®Œæˆ</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Domain: ãƒ«ãƒ¼ãƒ«ï¼ˆresolve_round / stepï¼‰ï¼‹ä¸æ­£æ¤œå‡º <span class="status domain">domain</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-007</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/domain/rules.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">domain</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 8.3 rules.py ã®ä¸­æ ¸ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>å‹æ•—åˆ¤å®š</li>
                <li>æ‰‹æœ­æ¶ˆè²»</li>
                <li>DRAW ç¶™ç¶šï¼éDRAW å³çµ‚äº†</li>
                <li>ä¸æ­£æ¤œå‡ºï¼ˆNOT_IN_HAND / AFTER_TERMINALï¼‰</li>
            </ul>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/domain/rules.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>1) resolve_round(emperor_card: CardType, slave_card: CardType) -> RoundOutcome</p>
            <ul>
                <li>CITIZEN vs CITIZEN => DRAW</li>
                <li>EMPEROR vs CITIZEN => EMPEROR_WIN</li>
                <li>CITIZEN vs SLAVE => EMPEROR_WIN</li>
                <li>EMPEROR vs SLAVE => SLAVE_WIN</li>
                <li>ä¸Šè¨˜ä»¥å¤–ï¼ˆä»•æ§˜ä¸Šèµ·ããªã„å…¥åŠ›ï¼‰ã¯ ValueError ã§ã‚‚ã‚ˆã„ï¼ˆä»•æ§˜å¤–ã‚’æ—©æœŸæ¤œå‡ºï¼‰</li>
            </ul>
            
            <p>2) step(state: BoutState, emperor_card: CardType, slave_card: CardType) -> BoutState</p>
            <ul>
                <li>state.terminal==True:
                    <ul>
                        <li>IllegalMoveError(IllegalType.AFTER_TERMINAL, ...) ã‚’é€å‡º</li>
                    </ul>
                </li>
                <li>æ‰‹æœ­ã«æå‡ºã‚«ãƒ¼ãƒ‰ãŒç„¡ã„å ´åˆ:
                    <ul>
                        <li>IllegalMoveError(IllegalType.NOT_IN_HAND, details={"side":..., "card":...}) ã‚’é€å‡º</li>
                    </ul>
                </li>
                <li>æ­£å¸¸ç³»:
                    <ul>
                        <li>ä¸¡è€…ã®æ‰‹æœ­ã‹ã‚‰ã‚«ãƒ¼ãƒ‰ã‚’1æšæ¶ˆè²»ï¼ˆcopy ã‚’ä½¿ã„å…¥åŠ› state ã‚’ç ´å£Šã—ãªã„ï¼‰</li>
                        <li>resolve_round ã§ outcome åˆ¤å®š</li>
                        <li>decisive_pair ã¯ decisive_pair_from_cards(emperor_card, slave_card) ã‚’ä½¿ç”¨</li>
                        <li>RoundRecord ã‚’ history ã«è¿½åŠ ï¼ˆround_index=len(history)ï¼‰</li>
                        <li>DRAW: terminal=False ã®ã¾ã¾</li>
                        <li>éDRAW:
                            <ul>
                                <li>terminal=True</li>
                                <li>winner è¨­å®šï¼ˆEMPEROR_WIN=>EMPEROR_SIDE / SLAVE_WIN=>SLAVE_SIDEï¼‰</li>
                                <li>state.decisive_pair ã‚‚è¨­å®š</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_domain_rules.py</p>
            
            <p>resolve_round:</p>
            <ul>
                <li>3ã™ãã¿ 3ã‚±ãƒ¼ã‚¹ï¼‹DRAW ãŒä»•æ§˜é€šã‚Š</li>
            </ul>
            
            <p>step æ­£å¸¸ç³»:</p>
            <ul>
                <li>DRAW ã§ã¯ terminal=False ã®ã¾ã¾ã€æ‰‹æœ­ãŒæ¸›ã‚Š history ãŒå¢—ãˆã‚‹</li>
                <li>éDRAW ã§ã¯ terminal=Trueã€winner ã¨ decisive_pair ãŒå…¥ã‚‹</li>
            </ul>
            
            <p>step ä¸æ­£:</p>
            <ul>
                <li>åˆæ‰‹ã§ slave ãŒ EMPEROR ã‚’å‡ºã™ï¼ˆæ‰‹æœ­ã«ãªã„ï¼‰=> NOT_IN_HAND</li>
                <li>terminal å¾Œã« step ã‚’å‘¼ã¶ => AFTER_TERMINAL</li>
            </ul>
            
            <p>æ‰‹æœ­æ¶ˆè²»:</p>
            <ul>
                <li>å‡ºã—ãŸã‚«ãƒ¼ãƒ‰ã®æ®‹æ•°ãŒ 1 æ¸›ã‚‹ï¼ˆä¸¡è€…ï¼‰</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>ä»•æ§˜æ›¸ 4ç« ï¼ˆãƒ«ãƒ¼ãƒ«ï¼‰ã¨ 5ç« ï¼ˆä¸æ­£æ¤œå‡ºï¼‰ã‚’æº€ãŸã™</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Application: BoutRunnerï¼ˆé€æ¬¡å®Ÿè¡Œï¼‰å®Ÿè£… <span class="status application">application</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-008</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/application/bout_engine.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">application</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 9.1 bout_engine.pyï¼šDomain ã® step ã‚’ä½¿ã£ã¦ bout ã‚’å®‰å…¨ã«å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/application/bout_engine.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>class BoutRunner
                    <ul>
                        <li>__init__(initial_state: BoutState | None = None)
                            <ul>
                                <li>None ã®å ´åˆ BoutState.initial()</li>
                            </ul>
                        </li>
                        <li>property state -> BoutState</li>
                        <li>step(emperor_card: CardType, slave_card: CardType) -> BoutState
                            <ul>
                                <li>å†…éƒ¨ state ã‚’æ›´æ–°ã—ã€æ›´æ–°å¾Œ state ã‚’è¿”ã™</li>
                            </ul>
                        </li>
                        <li>run_until_terminal(moves: list[tuple[CardType, CardType]]) -> BoutState
                            <ul>
                                <li>moves ã‚’é †ã«é©ç”¨ã—ã¦ terminal ã«ãªã‚‹ã¾ã§å®Ÿè¡Œ</li>
                                <li>moves ãŒå°½ãã¦ã‚‚ terminal ã«ãªã‚‰ãªã„å ´åˆã¯ ValueError</li>
                            </ul>
                        </li>
                        <li>try_step_after_terminal(emperor_card: CardType, slave_card: CardType) -> IllegalMoveError
                            <ul>
                                <li>ã„ã£ãŸã‚“ terminal ã¾ã§é€²ã‚ãŸå¾Œã«è¿½åŠ  step ã‚’è©¦ã—ã€
                                    å¿…ãš IllegalMoveError(AFTER_TERMINAL) ã‚’æ•æ‰ã—ã¦è¿”ã™ï¼ˆãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_application_bout_engine.py</p>
            <ul>
                <li>1æ‰‹ã§æ±ºç€ã™ã‚‹ moves ã‚’ä¸ãˆãŸã‚‰ terminal=True</li>
                <li>DRAWâ†’DRAWâ†’æ±ºç€ ã® moves ã§ draw å›æ•°ãŒ history ã‹ã‚‰æ•°ãˆã‚‰ã‚Œã‚‹</li>
                <li>terminal å¾Œã« try_step_after_terminal ã™ã‚‹ã¨ AFTER_TERMINAL ãŒè¿”ã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>Application å±¤ã® bout ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®‰å®šå‹•ä½œã™ã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Players: IPlayer ã¨ PlayerObservation ã®å®šç¾© <span class="status players">players</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-009</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/players/base.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">players</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ players/base.pyï¼šãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å®Ÿè£…ã‚’å·®ã—æ›¿ãˆå¯èƒ½ã«ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/players/base.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>PlayerObservationï¼ˆdataclass, frozen æ¨å¥¨ï¼‰
                    <ul>
                        <li>bout_index: int</li>
                        <li>round_index: int</li>
                        <li>side: Sideï¼ˆã“ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãŒã“ã® bout ã§æ‹…å½“ã™ã‚‹ Sideï¼‰</li>
                        <li>my_hand: Handï¼ˆå‚ç…§é€éæ€§ã®ãŸã‚ copy æ¨å¥¨ï¼‰</li>
                        <li>opponent_hand_size: intï¼ˆä»»æ„ã ãŒä¾¿åˆ©ï¼‰</li>
                    </ul>
                </li>
                <li>IPlayerï¼ˆProtocol ã¾ãŸã¯ ABCï¼‰
                    <ul>
                        <li>name: strï¼ˆä»»æ„ï¼‰</li>
                        <li>choose_card(self, obs: PlayerObservation) -> CardType</li>
                    </ul>
                </li>
            </ul>
            
            <h3>åˆ¶ç´„</h3>
            <ul>
                <li>I/O ã¯ä¸è¦ï¼ˆprint ã—ãªã„ï¼‰</li>
                <li>Domain ã® Hand / BoutState ã‚’ç›´æ¥ç ´å£Šã—ãªã„</li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_players_base.py</p>
            <ul>
                <li>PlayerObservation ãŒç”Ÿæˆã§ãã‚‹</li>
                <li>ãƒ€ãƒŸãƒ¼å®Ÿè£…ï¼ˆchoose_card ã‚’è¿”ã™ã‚¯ãƒ©ã‚¹ï¼‰ã§ choose_card ãŒå‘¼ã¹ã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>match_engine ãŒ IPlayer ã‚’ä½¿ã£ã¦ bout ã‚’å›ã›ã‚‹åœŸå°ãŒå®Œæˆ</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Players: ScriptedPlayer / MatchScriptedPlayerï¼ˆæ±ºã‚æ‰“ã¡æ‰‹ï¼‰ <span class="status players">players</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-010</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/players/scripted.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">players</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ players/scripted.pyï¼šãƒ†ã‚¹ãƒˆç”Ÿæˆã‚„ deterministic å®Ÿè¡Œã«ä½¿ãˆã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ç”¨æ„ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/players/scripted.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>1) ScriptedPlayer</p>
            <ul>
                <li>åˆæœŸåŒ–: ScriptedPlayer(script: list[CardType], name: str="scripted")</li>
                <li>choose_card(obs) ã§ script ã‚’é †ã«è¿”ã™</li>
                <li>script ãŒå°½ããŸã‚‰ ValueErrorï¼ˆãƒ©ãƒ³ãƒ€ãƒ åŒ–ã—ãªã„ï¼‰</li>
            </ul>
            
            <p>2) MatchScriptedPlayer</p>
            <ul>
                <li>åˆæœŸåŒ–ä¾‹:
                    <ul>
                        <li>MatchScriptedPlayer(per_bout_scripts: dict[int, list[CardType]], name: str="match_scripted")</li>
                    </ul>
                </li>
                <li>choose_card(obs) ã¯ obs.bout_index ã«å¯¾å¿œã™ã‚‹ script ã‚’ä½¿ç”¨ã—ã€ãƒ©ã‚¦ãƒ³ãƒ‰ã”ã¨ã«é †ã«è¿”ã™</li>
                <li>æŒ‡å®š bout_index ã® script ãŒç„¡ã„å ´åˆã¯ ValueError</li>
                <li>ãã® bout ã® script ãŒå°½ããŸå ´åˆã¯ ValueError</li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_players_scripted.py</p>
            <ul>
                <li>ScriptedPlayer:
                    <ul>
                        <li>2å› choose_card ã§ script[0], script[1] ãŒè¿”ã‚‹</li>
                        <li>3å›ç›®ã§ ValueError</li>
                    </ul>
                </li>
                <li>MatchScriptedPlayer:
                    <ul>
                        <li>bout_index=0 ã¨ 1 ã§åˆ¥ script ãŒæ¶ˆè²»ã•ã‚Œã‚‹</li>
                        <li>æœªå®šç¾© bout_index ã§ ValueError</li>
                    </ul>
                </li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>DTD ã® execute_scenario ãŒæ„å›³ã—ãŸæ‰‹é †ã‚’å†ç¾ã§ãã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] Application: MatchConfigï¼role swapï¼run_match å®Ÿè£… <span class="status application">application</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-011</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/application/match_engine.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">application</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 4.6 / 9.2ï¼šmatchï¼ˆè¤‡æ•° boutï¼‰ã¨ swap_interval ã«ã‚ˆã‚‹é™£å–¶äº¤ä»£ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/application/match_engine.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>1) MatchConfigï¼ˆdataclass, frozen æ¨å¥¨ï¼‰</p>
            <ul>
                <li>num_bouts: intï¼ˆä¾‹ï¼š12, 3ï¼‰</li>
                <li>swap_interval: intï¼ˆä¾‹ï¼š3ï¼‰</li>
                <li>starting_emperor_player: intï¼ˆ0 or 1ï¼‰</li>
            </ul>
            
            <p>2) role_assignment_for_bout(config: MatchConfig, bout_index: int) -> tuple[int, int]</p>
            <ul>
                <li>returns (emperor_player_index, slave_player_index)</li>
                <li>äº¤ä»£è¦å‰‡:
                    <ul>
                        <li>block = bout_index // swap_interval</li>
                        <li>block ãŒå¶æ•°: starting_emperor_player ãŒ emperor</li>
                        <li>block ãŒå¥‡æ•°: é€†</li>
                    </ul>
                </li>
            </ul>
            
            <p>3) çµæœãƒ¢ãƒ‡ãƒ«ï¼ˆææ¡ˆï¼šdataclassï¼‰</p>
            <ul>
                <li>BoutResult
                    <ul>
                        <li>bout_index: int</li>
                        <li>winner: Side | None</li>
                        <li>decisive_pair: DecisivePair | None</li>
                        <li>draw_count: int</li>
                        <li>rounds_played: int</li>
                        <li>illegal_type: IllegalType | None</li>
                        <li>emperor_player_index: int</li>
                        <li>slave_player_index: int</li>
                    </ul>
                </li>
                <li>MatchResult
                    <ul>
                        <li>config: MatchConfig</li>
                        <li>bouts: list[BoutResult]</li>
                        <li>aborted_by_illegal: bool</li>
                    </ul>
                </li>
            </ul>
            
            <p>4) run_bout_with_players(bout_index: int, emperor_player: IPlayer, slave_player: IPlayer, emperor_player_index: int, slave_player_index: int) -> BoutResult</p>
            <ul>
                <li>BoutRunner ã‚’ä½¿ã£ã¦ 1 bout å®Ÿè¡Œ</li>
                <li>å„ round ã§ PlayerObservation ã‚’ä½œã‚Šä¸¡è€… choose_card</li>
                <li>runner.step</li>
                <li>terminal ã§çµ‚äº†</li>
                <li>IllegalMoveError ãŒèµ·ããŸã‚‰ BoutResult.illegal_type ã«è¨˜éŒ²ã—ã¦ bout çµ‚äº†ï¼ˆmatch å´ã§ä¸­æ–­ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼‰</li>
                <li>å®‰å…¨ä¸Š max_rounds=5 è¶…éãªã‚‰ RuntimeErrorï¼ˆç†è«–ä¸Šè¶…ãˆãªã„ï¼‰</li>
            </ul>
            
            <p>5) run_match(player0: IPlayer, player1: IPlayer, config: MatchConfig) -> MatchResult</p>
            <ul>
                <li>bout_index=0..num_bouts-1 ã‚’å®Ÿè¡Œ</li>
                <li>role_assignment_for_bout ã«å¾“ã„ players ã®å½¹å‰²ã‚’å‰²å½“</li>
                <li>ã©ã“ã‹ã§ illegal ãŒå‡ºãŸã‚‰å³ä¸­æ–­ï¼ˆaborted_by_illegal=Trueï¼‰</li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_application_match_engine.py</p>
            
            <p>role_assignment:</p>
            <ul>
                <li>num_bouts=12, swap_interval=3, starting=0 ã®ã¨ã
                    <ul>
                        <li>bout 0-2: emperor=0</li>
                        <li>bout 3-5: emperor=1</li>
                        <li>bout 6-8: emperor=0</li>
                        <li>bout 9-11: emperor=1</li>
                    </ul>
                </li>
            </ul>
            
            <p>run_matchï¼ˆæ­£å¸¸ï¼‰:</p>
            <ul>
                <li>3 bout ã® match ãŒ 3çµæœã‚’è¿”ã™</li>
            </ul>
            
            <p>swap æ¤œè¨¼ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:</p>
            <ul>
                <li>emperor_player_index ãŒ BoutResult ã«å…¥ã‚‹ã“ã¨ï¼ˆDTD swap_ok åˆ¤å®šã§å¿…è¦ï¼‰</li>
            </ul>
            
            <p>run_matchï¼ˆä¸æ­£ã§ä¸­æ–­ï¼‰:</p>
            <ul>
                <li>bout0 ã§ NOT_IN_HAND ã‚’èµ·ã“ã™ Scripted ã‚’ä½¿ã†ã¨ aborted_by_illegal=True ã‹ã¤ bouts ãŒ 1ä»¶ã§æ­¢ã¾ã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>ä»•æ§˜æ›¸ã® match/swap ãƒ«ãƒ¼ãƒ«ã‚’æº€ãŸã—ã€DTD è¦³æ¸¬ o5 ã«å¿…è¦ãªæƒ…å ±ãŒ result ã«æƒã†</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] DTD: Scenarioï¼ˆXï¼‰è¡¨ç¾ã¨ JSON ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º <span class="status dtd">dtd</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-012</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/dtd/scenario.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">dtd</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ dtd/scenario.pyï¼šæ§‹é€ åŒ–ãƒ†ã‚¹ãƒˆè¡¨ç¾ X ã‚’ãƒ‡ãƒ¼ã‚¿åŒ–ã—ã€JSON ã«è½ã¨ã›ã‚‹å½¢ã«ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/dtd/scenario.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>1) Scenarioï¼ˆdataclass, frozen æ¨å¥¨ï¼‰</p>
            <ul>
                <li>scenario_id: strï¼ˆä¾‹: "BASE_BOUT_EMPEROR_VS_CITIZEN_k0"ï¼‰</li>
                <li>match_config: MatchConfig</li>
                <li>player0_scripts: dict[int, list[CardType]]</li>
                <li>player1_scripts: dict[int, list[CardType]]</li>
                <li>attempt_after_terminal: bool = False</li>
                <li>after_terminal_cards: tuple[CardType, CardType] | None = None
                    <ul>
                        <li>AFTER_TERMINAL ã‚’è©¦ã™å ´åˆã«ä½¿ç”¨</li>
                        <li>(emperor_side_card, slave_side_card) ã¨ã—ã¦ä¿æŒï¼ˆå®Ÿéš›ã® player å‰²å½“ã¯ execute_scenario å´ã§å‡¦ç†ï¼‰</li>
                    </ul>
                </li>
            </ul>
            
            <p>2) ExecutionResultï¼ˆdataclassï¼‰</p>
            <ul>
                <li>scenario_id: str</li>
                <li>covered: set[str]ï¼ˆobligation IDsï¼‰</li>
                <li>cost: float</li>
                <li>match_result: MatchResultï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ã€‚JSON ã«å«ã‚ãªãã¦ã‚‚ã‚ˆã„ï¼‰</li>
            </ul>
            
            <p>3) JSON helpers</p>
            <ul>
                <li>scenario_to_dict(s: Scenario) -> dict</li>
                <li>scenario_from_dict(d: dict) -> Scenario</li>
                <li>Enumï¼ˆCardType/Side/DecisivePair/IllegalTypeï¼‰ã¯æ–‡å­—åˆ—ã¨ã—ã¦ä¿å­˜ã™ã‚‹
                    <ul>
                        <li>ä¾‹: "CITIZEN"</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_dtd_scenario.py</p>
            <ul>
                <li>Scenario ã‚’ dict åŒ–ã—ã¦ JSON round-tripï¼ˆto_dictâ†’jsonâ†’from_dictï¼‰ã§ãã‚‹</li>
                <li>CardType ã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºãŒæœŸå¾…é€šã‚Šï¼ˆ"EMPEROR"/"CITIZEN"/"SLAVE"ï¼‰</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>scripts/generate_tests.py ãŒ Scenario ã‚’ JSON å‡ºåŠ›ã§ãã‚‹åœŸå°ãŒã§ãã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] DTD: è¦³æ¸¬ï¼ˆS ã® o1..o5ï¼‰å®Ÿè£…ï¼ˆobserve_bout / observe_matchï¼‰ <span class="status dtd">dtd</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-013</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/dtd/observers.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">dtd</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 10.1 ã®è¦³ç‚¹æŸ Sï¼ˆo1..o5ï¼‰ã‚’ã‚³ãƒ¼ãƒ‰ã§è¦³æ¸¬ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/dtd/observers.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>1) observe_bout(br: BoutResult) -> dict[str, object]</p>
            <ul>
                <li>o1: winnerï¼ˆSide|Noneï¼‰</li>
                <li>o2: decisive_pairï¼ˆDecisivePair|Noneï¼‰</li>
                <li>o3: draw_countï¼ˆintï¼‰</li>
                <li>o4: illegal_typeï¼ˆIllegalType|Noneï¼‰</li>
            </ul>
            
            <p>2) observe_match(mr: MatchResult) -> dict[str, object]</p>
            <ul>
                <li>o5: match structure
                    <ul>
                        <li>num_bouts</li>
                        <li>swap_interval</li>
                        <li>swap_okï¼ˆboolï¼‰</li>
                    </ul>
                </li>
            </ul>
            
            <p>swap_ok ã®å®šç¾©ï¼ˆæ±ºå®šçš„ã§ãƒ†ã‚¹ãƒˆå¯èƒ½ã«ã™ã‚‹ï¼‰</p>
            <ul>
                <li>swap_ok=True ã®æ¡ä»¶:
                    <ul>
                        <li>config.swap_interval > 0</li>
                        <li>å…¨ã¦ã® BoutResult ã« emperor_player_index ãŒå…¥ã£ã¦ã„ã‚‹</li>
                        <li>æœŸå¾…ã•ã‚Œã‚‹ role_assignment_for_bout(config, i) ã® emperor_player_index ã¨ä¸€è‡´ã—ã¦ã„ã‚‹</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_dtd_observers.py</p>
            <ul>
                <li>BoutResult ã‹ã‚‰ winner/decisive_pair/draw_count/illegal_type ãŒè¦³æ¸¬ã§ãã‚‹</li>
                <li>swap_ok:
                    <ul>
                        <li>æ­£ã—ã„ role å±¥æ­´ã‚’æŒã¤ MatchResult ã§ True</li>
                        <li>1ã¤ã§ã‚‚ã‚ºãƒ¬ãŸå±¥æ­´ã‚’æŒã¤ MatchResult ã§ False</li>
                    </ul>
                </li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>obligations åˆ¤å®šï¼ˆA(S)ï¼‰ã«å¿…è¦ãªè¦³æ¸¬å€¤ãŒæƒã†</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] DTD: obligationsï¼ˆA(S)ï¼‰universeï¼ˆ18ï¼‰ã¨è¢«è¦†åˆ¤å®š <span class="status dtd">dtd</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-014</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/dtd/obligations.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">dtd</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 10.2ï¼šobligation IDï¼ˆåˆè¨ˆ18ï¼‰ã‚’åˆ—æŒ™ã—ã€è¦³æ¸¬çµæœã‹ã‚‰ covered obligations ã‚’ç®—å‡ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚</p>
            
            <h3>Universeï¼ˆå¿…é ˆï¼šåˆè¨ˆ18ï¼‰</h3>
            <p>(A) bout ç¾¤ï¼ˆ13å€‹ï¼‰</p>
            <ul>
                <li>BOUT:EMPEROR_VS_CITIZEN:kï¼ˆk=0..3ï¼‰</li>
                <li>BOUT:CITIZEN_VS_SLAVE:kï¼ˆk=0..3ï¼‰</li>
                <li>BOUT:SLAVE_VS_EMPEROR:kï¼ˆk=0..4ï¼‰</li>
            </ul>
            
            <p>(B) ä¸æ­£ï¼ˆ2å€‹ï¼‰</p>
            <ul>
                <li>ILLEGAL:NOT_IN_HAND</li>
                <li>ILLEGAL:AFTER_TERMINAL</li>
            </ul>
            
            <p>(C) match æ§‹é€ ï¼ˆ3å€‹ï¼‰</p>
            <ul>
                <li>MATCH:TOTAL12</li>
                <li>MATCH:TOTAL3</li>
                <li>MATCH:SWAP_AFTER_3</li>
            </ul>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/dtd/obligations.py ã«ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            <ul>
                <li>universe_obligations() -> set[str]
                    <ul>
                        <li>ä¸Šè¨˜18å€‹ã‚’è¿”ã™</li>
                    </ul>
                </li>
                <li>covered_obligations_from_match_observation(match_obs: dict[str, object]) -> set[str]
                    <ul>
                        <li>num_bouts==12 -> MATCH:TOTAL12</li>
                        <li>num_bouts==3 -> MATCH:TOTAL3</li>
                        <li>swap_interval==3 and swap_ok==True -> MATCH:SWAP_AFTER_3</li>
                    </ul>
                </li>
                <li>covered_obligations_from_bout_observation(bout_obs: dict[str, object]) -> set[str]
                    <ul>
                        <li>illegal_type ãŒã‚ã‚Œã° ILLEGAL:* ã‚’ä»˜ä¸</li>
                        <li>decisive_pair ã¨ draw_count ã«ã‚ˆã‚Š BOUT:* ã‚’ä»˜ä¸ï¼ˆç¯„å›²å¤– k ã¯ä»˜ä¸ã—ãªã„ï¼‰</li>
                    </ul>
                </li>
                <li>covered_obligations(match_obs, bout_obs_list) -> set[str]
                    <ul>
                        <li>match + å„ bout ã® union</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_dtd_obligations.py</p>
            <ul>
                <li>universe ãŒ 18å€‹ã§ã‚ã‚‹</li>
                <li>BOUT ç¯„å›²ãƒã‚§ãƒƒã‚¯:
                    <ul>
                        <li>EMPEROR_VS_CITIZEN ã® k=3 ã¯ä»˜ä¸ã•ã‚Œã‚‹ãŒ k=4 ã¯ä»˜ä¸ã•ã‚Œãªã„</li>
                    </ul>
                </li>
                <li>illegal è¦³æ¸¬ã§ ILLEGAL:* ãŒä»˜ä¸ã•ã‚Œã‚‹</li>
                <li>match è¦³æ¸¬ã§ TOTAL12/TOTAL3/SWAP_AFTER_3 ãŒä»˜ä¸ã•ã‚Œã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>DTD ã®é›†åˆè¢«è¦†ã§ä½¿ç”¨ã™ã‚‹è¦æ±‚é›†åˆãŒç¢ºå®šã™ã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] DTD: greedy weighted set cover å®Ÿè£… <span class="status dtd">dtd</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-015</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/dtd/setcover.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">dtd</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 11.1ï¼šé›†åˆè¢«è¦†ï¼ˆã‚³ã‚¹ãƒˆæœ€å°å¯„ã‚Šï¼‰ã‚’ greedy ã§å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/dtd/setcover.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>- greedy_set_cover(
                universe: set[str],
                candidates: list[tuple[str, set[str], float]],
                budget: float | None = None
                ) -> tuple[list[str], set[str]]</p>
            
            <p>candidates è¦ç´ :</p>
            <ul>
                <li>(candidate_id, covered_set, cost)</li>
            </ul>
            
            <p>æˆ»ã‚Šå€¤:</p>
            <ul>
                <li>(selected_ids, uncovered_set)</li>
            </ul>
            
            <p>greedy ãƒ«ãƒ¼ãƒ«ï¼ˆæ±ºå®šçš„ã«ã™ã‚‹ï¼‰</p>
            <ol>
                <li>gain = æœªè¢«è¦†ã®ã†ã¡æ–°è¦ã«è¦†ãˆã‚‹æ•°</li>
                <li>score = gain / cost ã‚’æœ€å¤§åŒ–ã™ã‚‹å€™è£œã‚’é¸ã¶</li>
                <li>åŒç‚¹ãªã‚‰:
                    <ul>
                        <li>cost ãŒå°ã•ã„æ–¹</li>
                        <li>ã•ã‚‰ã«åŒç‚¹ãªã‚‰ candidate_id ã®è¾æ›¸é †</li>
                    </ul>
                </li>
            </ol>
            
            <p>budget:</p>
            <ul>
                <li>æŒ‡å®šãŒã‚ã‚Œã°åˆè¨ˆã‚³ã‚¹ãƒˆãŒ budget ã‚’è¶…ãˆãªã„ç¯„å›²ã§é¸ã¶</li>
                <li>å®Œå…¨è¢«è¦†ã§ããªã„å ´åˆ uncovered ãŒæ®‹ã£ã¦ã‚ˆã„</li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_dtd_setcover.py</p>
            <ul>
                <li>å°ã•ãªæ‰‹ä½œã‚Šä¾‹ã§æœŸå¾… selected ãŒå¾—ã‚‰ã‚Œã‚‹</li>
                <li>budget åˆ¶ç´„ã§é¸æŠãŒæ­¢ã¾ã‚Š uncovered ãŒæ®‹ã‚‹ã‚±ãƒ¼ã‚¹</li>
                <li>tie-break ãŒæ±ºå®šçš„ï¼ˆåŒç‚¹å€™è£œã§ id é †ã«å®‰å®šï¼‰</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>scripts/generate_tests.py ã‹ã‚‰å‘¼ã¹ã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] DTD: execute_scenario ï¼‹ base/random å€™è£œç”Ÿæˆï¼ˆgeneratorï¼‰ <span class="status dtd">dtd</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-016</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> ec/dtd/generator.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">dtd</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 11ç« ï¼šå€™è£œç”Ÿæˆï¼ˆbase + randomï¼‰ã¨ã€å®Ÿè¡Œã—ã¦ covered/cost ã‚’è©•ä¾¡ã™ã‚‹ execute_scenario ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>ec/dtd/generator.py ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>1) execute_scenario(
                scenario: Scenario,
                overhead: float = 1.0,
                per_round: float = 1.0
                ) -> ExecutionResult</p>
            
            <p>æŒ™å‹•:</p>
            <ul>
                <li>scenario ã‹ã‚‰ MatchScriptedPlayer ã‚’çµ„ã¿ç«‹ã¦ run_match å®Ÿè¡Œ</li>
                <li>observe_match / observe_bout ã‚’å–ã‚Š covered_obligations(...) ã‚’ç®—å‡º</li>
                <li>cost ã‚’è¨ˆç®—:
                    <ul>
                        <li>cost = overhead + per_round * total_rounds</li>
                        <li>total_rounds = sum(bout.rounds_played)</li>
                        <li>attempt_after_terminal=True ã®å ´åˆ:
                            <ul>
                                <li>AFTER_TERMINAL ã®è¿½åŠ è©¦è¡Œã‚’è¡Œã„ã€illegal_type=AFTER_TERMINAL ã‚’è¦³æ¸¬ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹</li>
                                <li>è¿½åŠ ã‚³ã‚¹ãƒˆã¨ã—ã¦ per_round ã‚’ 1 å›åˆ†åŠ ç®—ã—ã¦ã‚ˆã„ï¼ˆå›ºå®šã§OKï¼‰</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
            
            <p>AFTER_TERMINAL ã®å®Ÿè£…æŒ‡é‡ï¼ˆã©ã‚Œã‹ä¸€ã¤ã§è‰¯ã„ï¼‰</p>
            <ul>
                <li>æ–¹é‡A: scenario.match_config.num_bouts==1 ã«é™å®šã—ã€BoutRunner ã‚’ç›´æ¥ä½¿ã£ã¦
                    <ul>
                        <li>æ±ºç€ã¾ã§å®Ÿè¡Œ</li>
                        <li>after_terminal_cards ã§è¿½åŠ  step ã‚’è¡Œã„ IllegalMoveError ã‚’æ•æ‰</li>
                        <li>BoutResult.illegal_type=AFTER_TERMINAL ã‚’ã‚»ãƒƒãƒˆã—ãŸ MatchResult ã‚’åˆæˆã™ã‚‹</li>
                    </ul>
                </li>
                <li>æ–¹é‡B: run_bout_with_players ã«ã€Œafter_terminal è©¦è¡Œã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ã¦å®Ÿè¡Œä¸­ã«æ³¨å…¥ã™ã‚‹
                    ã©ã¡ã‚‰ã§ã‚‚è‰¯ã„ãŒã€pytest ã§ deterministic ã«æ¤œè¨¼ã§ãã‚‹ã“ã¨ã€‚</li>
            </ul>
            
            <p>2) generate_base_candidates() -> list[Scenario]
                æœ€ä½é™ã€ä»¥ä¸‹ã‚’ç”Ÿæˆã§ãã‚‹ã“ã¨ï¼ˆæ¨å¥¨ï¼šãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§å…¨åˆ—æŒ™ï¼‰</p>
            
            <p>(BOUT obligations: 13å€‹ã‚’å˜ä½“ã§ä½œã‚‹ã€‚match_config.num_bouts=1 ã§OK)</p>
            <ul>
                <li>EMPEROR_VS_CITIZEN k=0..3:
                    <ul>
                        <li>kå› DRAWï¼ˆCITIZEN vs CITIZENï¼‰å¾Œã« (EMPEROR, CITIZEN) ã§æ±ºç€</li>
                    </ul>
                </li>
                <li>CITIZEN_VS_SLAVE k=0..3:
                    <ul>
                        <li>kå› DRAW å¾Œã« (CITIZEN, SLAVE) ã§æ±ºç€</li>
                    </ul>
                </li>
                <li>SLAVE_VS_EMPEROR k=0..4:
                    <ul>
                        <li>kå› DRAW å¾Œã« (EMPEROR, SLAVE) ã§æ±ºç€</li>
                    </ul>
                </li>
            </ul>
            
            <p>(ILLEGAL: 2å€‹)</p>
            <ul>
                <li>ILLEGAL:NOT_IN_HAND:
                    <ul>
                        <li>ä¾‹: slave å´ãŒ EMPEROR ã‚’å‡ºã™ï¼ˆæ‰‹æœ­ã«ãªã„ï¼‰</li>
                    </ul>
                </li>
                <li>ILLEGAL:AFTER_TERMINAL:
                    <ul>
                        <li>1æ‰‹ã§æ±ºç€ â†’ ãã®å¾Œ attempt_after_terminal=True ã§è¿½åŠ æå‡ºã‚’è©¦ã™</li>
                    </ul>
                </li>
            </ul>
            
            <p>(MATCH structure: 3å€‹)</p>
            <ul>
                <li>MATCH:TOTAL12ï¼ˆnum_bouts=12ï¼‰</li>
                <li>MATCH:TOTAL3ï¼ˆnum_bouts=3ï¼‰</li>
                <li>MATCH:SWAP_AFTER_3ï¼ˆswap_interval=3 ã§ swap_ok=True ãŒè¦³æ¸¬ã•ã‚Œã‚‹ï¼‰
                    <ul>
                        <li>æ¨å¥¨: TOTAL12 ã¨ SWAP_AFTER_3 ã¯åŒä¸€ã‚·ãƒŠãƒªã‚ªã§åŒæ™‚è¢«è¦†ã—ã¦ã‚ˆã„</li>
                    </ul>
                </li>
            </ul>
            
            <p>3) generate_random_candidates(seed: int, n: int) -> list[Scenario]</p>
            <ul>
                <li>random.Random(seed) ã‚’ä½¿ç”¨</li>
                <li>rng.gauss(0,1) ã‚’ä½¿ã£ãŸ â€œãã‚Œã£ã½ã„â€ ç”Ÿæˆï¼ˆå³å¯†ã•ä¸è¦ï¼‰</li>
                <li>ãŸã ã— Scenario ãŒå®Ÿè¡Œä¸èƒ½ï¼ˆscriptä¸è¶³ï¼‰ã«ãªã‚‰ãªã„ã‚ˆã†ã«ã™ã‚‹
                    <ul>
                        <li>å„ bout ã¯æœ€å¤§ 5 æ‰‹ä»¥å†…ã«å¿…ãšçµ‚ã‚ã‚‹ script ã«ã™ã‚‹ï¼ˆCITIZEN ã§å¼•ãåˆ†ã‘â†’æœ€å¾Œã«æ±ºç€ã‚«ãƒ¼ãƒ‰ç­‰ï¼‰</li>
                    </ul>
                </li>
            </ul>
            
            <h3>ãƒ†ã‚¹ãƒˆ</h3>
            <p>tests/test_dtd_generator.py</p>
            <ul>
                <li>generate_base_candidates ãŒç©ºã§ãªã„</li>
                <li>base å€™è£œã®ä¸€éƒ¨ã‚’ execute_scenario ã—ã¦:
                    <ul>
                        <li>æœŸå¾…ã™ã‚‹ BOUT obligation ãŒ covered ã«å«ã¾ã‚Œã‚‹ï¼ˆä¾‹: BOUT:EMPEROR_VS_CITIZEN:k0ï¼‰</li>
                        <li>æœŸå¾…ã™ã‚‹ ILLEGAL obligation ãŒ covered ã«å«ã¾ã‚Œã‚‹ï¼ˆNOT_IN_HAND / AFTER_TERMINALï¼‰</li>
                        <li>match æ§‹é€ ã® obligation ã®å°‘ãªãã¨ã‚‚1ã¤ãŒ covered ã«å«ã¾ã‚Œã‚‹</li>
                    </ul>
                </li>
                <li>generate_random_candidates(seed=0,n=5) ãŒ
                    <ul>
                        <li>ä¾‹å¤–ã§è½ã¡ãªã„ï¼ˆå®Ÿè¡Œå¯èƒ½ï¼‰</li>
                        <li>deterministicï¼ˆåŒseedã§åŒã˜ scenario_id ç¾¤ã«ãªã‚‹ï¼‰</li>
                    </ul>
                </li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>scripts/generate_tests.py ãŒã€Œå€™è£œç”Ÿæˆâ†’è¦³æ¸¬â†’é›†åˆè¢«è¦†ã€ã‚’å®Ÿè¡Œã§ãã‚‹</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] scripts/generate_tests.py å®Ÿè£…ï¼ˆJSONï¼‹pytest ç”Ÿæˆï¼‰ <span class="status scripts">scripts</span> <span class="status tests">tests</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-017</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> scripts/generate_tests.py</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">scripts</span>
                    <span class="labels">tests</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ä»•æ§˜æ›¸ 11.2 / 12ç« ï¼šCLI ã‚’æä¾›ã— generated_suite.json ã¨ tests_generated.py ã‚’ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>scripts/generate_tests.py ã‚’å®Ÿè£…ã™ã‚‹ã€‚</p>
            
            <p>CLIï¼ˆargparseï¼‰</p>
            <ul>
                <li>--seedï¼ˆint, default=0ï¼‰</li>
                <li>--n-randomï¼ˆint, default=60ï¼‰</li>
                <li>--budgetï¼ˆfloat, optionalï¼‰</li>
                <li>--overheadï¼ˆfloat, default=1.0ï¼‰</li>
                <li>--per-roundï¼ˆfloat, default=1.0ï¼‰</li>
                <li>--out-jsonï¼ˆstr, default="generated_suite.json"ï¼‰</li>
                <li>--out-pytestï¼ˆstr, default="tests_generated.py"ï¼‰</li>
            </ul>
            
            <p>å‡¦ç†ãƒ•ãƒ­ãƒ¼</p>
            <ol>
                <li>å€™è£œç”Ÿæˆ
                    <ul>
                        <li>base = generate_base_candidates()</li>
                        <li>rnd = generate_random_candidates(seed, n_random)</li>
                        <li>candidates = base + rnd</li>
                    </ul>
                </li>
                <li>å®Ÿè¡Œãƒ»è¦³æ¸¬
                    <ul>
                        <li>å„ scenario ã‚’ execute_scenario ã—ã¦
                            <ul>
                                <li>covered: set[str]</li>
                                <li>cost: float</li>
                            </ul>
                            ã‚’å¾—ã‚‹</li>
                    </ul>
                </li>
                <li>é›†åˆè¢«è¦†
                    <ul>
                        <li>universe = universe_obligations()</li>
                        <li>greedy_set_cover(universe, candidates=(scenario_id, covered, cost), budget=budget)</li>
                    </ul>
                </li>
                <li>JSON å‡ºåŠ›ï¼ˆgenerated_suite.jsonï¼‰
                    æœ€ä½é™ã“ã®æ§‹é€ ã§å›ºå®šã™ã‚‹ï¼ˆå­—æ®µåå›ºå®šï¼‰
                    <ul>
                        <li>universe: list[str]</li>
                        <li>selected: list[ {scenario: dict, expected_covered: list[str], cost: float} ]</li>
                        <li>uncovered: list[str]</li>
                        <li>meta: {seed, n_random, overhead, per_round}</li>
                    </ul>
                </li>
                <li>pytest å‡ºåŠ›ï¼ˆtests_generated.pyï¼‰
                    <ul>
                        <li>JSON ã‚’èª­ã¿è¾¼ã¿ã€å„ selected scenario ã‚’å†å®Ÿè¡Œã—ã¦
                            <ul>
                                <li>set(expected_covered).issubset(actual_covered)</li>
                            </ul>
                            ã‚’ assert ã™ã‚‹ parameterized test ã‚’ç”Ÿæˆã™ã‚‹</li>
                        <li>ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«å˜ä½“ã§ pytest -q tests_generated.py ãŒé€šã‚‹ã“ã¨</li>
                        <li>import ã¯ ec ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«åˆã‚ã›ã‚‹
                            <ul>
                                <li>ä¾‹: from ec.dtd.generator import execute_scenario</li>
                                <li>ä¾‹: from ec.dtd.scenario import scenario_from_dict</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>
            
            <h3>ãƒ†ã‚¹ãƒˆï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆè‡ªä½“ï¼‰</h3>
            <p>tests/test_generate_tests_script.py</p>
            <ul>
                <li>tmp_path ã‚’ä½¿ã£ã¦å‡ºåŠ›å…ˆã‚’ä¸€æ™‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã™ã‚‹</li>
                <li>JSON ãŒç”Ÿæˆã•ã‚Œã‚‹</li>
                <li>tests_generated.py ãŒç”Ÿæˆã•ã‚Œã‚‹</li>
                <li>selected ãŒç©ºã§ã¯ãªã„ï¼ˆbase ãŒã‚ã‚‹ãŸã‚ï¼‰</li>
                <li>expected_covered ãŒ universe ã®éƒ¨åˆ†é›†åˆã§ã‚ã‚‹</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>ä»•æ§˜æ›¸ã®æœ€å°æ‰‹é †é€šã‚Šã«å‹•ä½œã—ã€ç”Ÿæˆ pytest ãŒ import error ã«ãªã‚‰ãªã„</li>
            </ul>
        </div>

        <div class="character">
            <h2>Title: [ec] çµ±åˆã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆï¼‹READMEï¼ˆç”Ÿæˆâ†’pytest å®Ÿè¡Œæ‰‹é †ã‚’å›ºå®šï¼‰ <span class="status documentation">documentation</span> <span class="status tests">tests</span> <span class="status ci">ci</span></h2>
            <div class="metadata">
                <div class="metadata-item"><span class="metadata-key">Key:</span> SBX-EC-018</div>
                <div class="metadata-item"><span class="metadata-key">Project:</span> ec</div>
                <div class="metadata-item"><span class="metadata-key">Path:</span> README.md</div>
                <div class="metadata-item"><span class="metadata-key">Labels:</span> 
                    <span class="labels">documentation</span>
                    <span class="labels">tests</span>
                    <span class="labels">ci</span>
                </div>
            </div>
            <h3>Goal</h3>
            <p>ã€Œç”Ÿæˆâ†’pytest å®Ÿè¡ŒãŒé€šã‚‹ã€ã‚’ CI/ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ç¾ã§ãã‚‹å½¢ã«å›ºå®šã™ã‚‹ã€‚</p>
            
            <h3>å®Ÿè£…å†…å®¹</h3>
            <p>1) README.md ã‚’ä½œæˆ/æ›´æ–°</p>
            <ul>
                <li>æœ€å°æ‰‹é †ã‚’æ˜è¨˜
                    <ul>
                        <li>python scripts/generate_tests.py --seed 0 --n-random 60</li>
                        <li>pytest -q tests_generated.py</li>
                    </ul>
                </li>
                <li>ç”Ÿæˆç‰©:
                    <ul>
                        <li>generated_suite.json</li>
                        <li>tests_generated.py</li>
                    </ul>
                    ã®èª¬æ˜</li>
                <li>obligationsï¼ˆ18å€‹ï¼‰ã®æ¦‚è¦ã¨ã€ãªãœ set cover ã™ã‚‹ã‹ã‚’ç°¡æ½”ã«è¨˜è¼‰</li>
            </ul>
            
            <p>2) çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆè»½é‡ï¼‰ã‚’è¿½åŠ 
                tests/test_integration_generated_suite.py
                æ–¹é‡:</p>
            <ul>
                <li>scripts/generate_tests.py ã® main ç›¸å½“ã‚’çŸ­æ™‚é–“ã§å®Ÿè¡Œã™ã‚‹
                    <ul>
                        <li>æ¨å¥¨: --n-random 0ï¼ˆbase ã®ã¿ï¼‰ã§å®Œå…¨è¢«è¦†ã§ãã‚‹è¨­è¨ˆãªã‚‰ uncovered==[] ã‚’æœŸå¾…</li>
                        <li>base ã®ã¿ã§å®Œå…¨è¢«è¦†ãŒé›£ã—ã„å ´åˆ:
                            <ul>
                                <li>--n-random 30 ãªã©æœ€å°é™ã«ã—ã¦ deterministic ã« uncovered==[] ã‚’æº€ãŸã™</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>å‡ºåŠ›2ãƒ•ã‚¡ã‚¤ãƒ«ãŒã§ãã‚‹ã“ã¨</li>
                <li>JSON ã® uncovered ãŒç©ºã§ã‚ã‚‹ã“ã¨ï¼ˆå®Œå…¨è¢«è¦†ã§ãã‚‹ã“ã¨ï¼‰</li>
            </ul>
            
            <h3>Done</h3>
            <ul>
                <li>README ã®æ‰‹é †ã§ãƒ­ãƒ¼ã‚«ãƒ«å†ç¾ã§ãã‚‹</li>
                <li>pytest -q ãŒï¼ˆçµ±åˆãƒ†ã‚¹ãƒˆè¾¼ã¿ã§ï¼‰é€šã‚‹</li>
            </ul>
        </div>
    </div>

    <div class="footer">
        <p>Epic: Eã‚«ãƒ¼ãƒ‰ï¼‹DTD ãƒ†ã‚¹ãƒˆç”Ÿæˆ ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° | SBX-EC-001 ï½ SBX-EC-018 | å®Œäº†ã¾ã§ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°</p>
    </div>

    <script>
        // æ•°å¼ã®è‡ªå‹•ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true}
                ],
                throwOnError: false
            });
        });
    </script>
</body>
</html>